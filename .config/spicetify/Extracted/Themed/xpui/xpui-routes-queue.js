"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[727],{70369:(e,t,n)=>{n.d(t,{$:()=>r.$});var r=n(22578)},8416:(e,t,n)=>{n.r(t),n.d(t,{QueueHistoryRoutes:()=>je,default:()=>Te});var r=n(67294),a=n.n(r),i=n(73305),l=n(46886),u=n(9832),c=n(28760),o=n(20657),s=n(31);const m="atsVsq_V4TOEd6m8v4dy",d="rUaDGpvrpIlwpDrPRQbL",f="l9_FyRGTEmDOyjWBmHiZ";var p=function(){return a().createElement("div",{className:m},a().createElement(s.l,{iconSize:64}),a().createElement(c.Dy,{as:"h1",variant:"alto",semanticColor:"textBase",className:d},o.ag.get("history.empty-title")),a().createElement("p",null,o.ag.get("history.empty-description")))},v=(n(21249),n(68309),n(26699),n(32023),n(69518)),E=n.n(v),g=n(42922),y=n(59713),b=n.n(y),h=n(68551),O=n.n(h),k=n(319),w=n.n(k),N=n(63038),C=n.n(N),x=(n(91038),n(78783),n(66992),n(41539),n(70189),n(33948),n(57327),n(88674),n(92222),n(47042),n(89554),n(54747),n(47941),n(82526),n(38880),n(49337),n(33321),n(69070),n(19719)),D=n(80624);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=[];function S(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,r.useState)({}),a=C()(n,2),i=a[0],l=a[1];return(0,r.useEffect)((function(){if(t){var n=Array.from(new Set(e)),r=n.filter((function(e){return E().isTrack(e)&&!i[e]})),a=n.filter((function(e){return E().isEpisode(e)&&!i[e]})),u=r.length?x.fQ.getTracks(D.b.getInstance(),r.map((function(e){return E().from(e).getBase62Id()}))).then((function(e){return e.body.tracks||q})):Promise.resolve(q),c=a.map((function(e){return x.UY.getEpisodeGraphQL(D.b.getInstance(),E().from(e).getBase62Id()).then((function(e){return(null==e?void 0:e.body)||{}})).catch((function(t){return console.error(t),{uri:e}}))}));Promise.all([u].concat(w()(c))).then((function(e){var t=O()(e),n=t[0],r=t.slice(1),a={},i={};n.forEach((function(e){var t;a[(null==e||null===(t=e.linked_from)||void 0===t?void 0:t.uri)||e.uri]=e})),r.forEach((function(e){i[e.uri]=e})),(n.length>0||r.length>0)&&l((function(e){return I(I(I({},e),a),i)}))}))}}),[e,i,t]),e.map((function(e){return i[e]}))}var U=n(42781),j=n(49961),T=n(47991),L=n(28248),A=n(48852),B=a().memo((function(e){var t=e.items,n=S(t.map((function(e){return e.uri}))),i=(0,r.useMemo)((function(){return n.map((function(e,n){return t[n].isLocal?t[n]:e}))}),[n,t]),l=(0,r.useCallback)((function(e,t){if((i=e).type===U.p.TRACK&&E().isTrack(i.uri)){var n,r=(0,j.X)(null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40});return a().createElement(A.Lk,{key:t+e.uri,index:t,uri:(0,T.$V)(e),name:e.name,duration_ms:e.duration_ms,imgUrl:(null==r?void 0:r.url)||"",album:e.album,artists:e.artists,isExplicit:e.explicit,isMOGEFRestricted:(e.tags||[]).includes("MOGEF-19+")})}var i,l,u;if(function(e){return e.type===U.p.EPISODE}(e)){var c,o=(0,j.X)(null===(c=e.show)||void 0===c?void 0:c.images,{desiredSize:40});return a().createElement(A.Lk,{key:t+e.uri,index:t,uri:(0,T.$V)(e),name:e.name,duration_ms:e.duration_ms,imgUrl:(null==o?void 0:o.url)||"",album:{name:e.show.name,uri:e.show.uri},artists:[{name:e.show.publisher,uri:""}],isExplicit:e.explicit,isMOGEFRestricted:!1})}return function(e){return e.type===U.p.TRACK&&E().isLocalTrack(e.uri)}(e)?a().createElement(A.Lk,{key:t+e.uri,index:t,uri:e.uri,name:e.name,duration_ms:e.duration,imgUrl:e.imageUrl||"",album:{name:(null===(l=e.album)||void 0===l?void 0:l.name)||"",uri:""},artists:[{name:(null===(u=e.artist)||void 0===u?void 0:u.name)||"",uri:""}],isExplicit:e.isExplicit,isMOGEFRestricted:!1}):a().createElement(L.hU,{height:"".concat(L.dN,"px")})}),[]),u=(0,r.useMemo)((function(){return[L.QD.TITLE,L.QD.ALBUM_OR_PODCAST,L.QD.DURATION]}),[]),c=(0,r.useCallback)((function(e){return e.uri}),[]);return a().createElement(a().Fragment,null,a().createElement(g.ZP,{value:"play-history-tracklist"},a().createElement(L.Pv,{ariaLabel:"play-history",hasHeaderRow:!0,columns:u,renderRow:l,resolveUri:c,tracks:i,nrTracks:i.length,rowPlaceholder:L.hU,limit:50})))}));const R="lKD15PN9kUzmXgvbqyku",Q="QyHCIHEiCu2GI4iwPEiv";var _=function(){var e=(0,u.U5)();return e&&e.items.length>0?a().createElement("div",{className:R},a().createElement(c.Dy,{as:"h1",variant:"canon",semanticColor:"textBase",className:Q},o.ag.get("view.recently-played")),a().createElement(B,{items:e.items})):a().createElement(p,null)},G=(n(41817),n(94184)),F=n.n(G),M=n(23716),V=n(84242),K=n(34891),z=n(86081);var W=n(14472),H=n(70369),Y=n(67892),X=n(62890);const Z="vPcEtsKAuDcjwDdk6DVI";var $=function(e){var t=e.onClick;return a().createElement(X.z,{className:Z,version:"outlined",onClick:t,title:o.ag.get("queue.clear-queue")},a().createElement(c.Dy,{variant:"minuetBold"},o.ag.get("queue.clear-queue")))},J=n(73753),ee=n(21770),te=n(99450),ne=n(16229),re=n(18061),ae=n(8247),ie=n(85105);const le="ekxwDBqjmLy3ViXWVZAm",ue="ecu2GBw9UEtlqvmNtWqQ",ce="K4EGJOvv5EFhspqNNTbN",oe="WSOVmnq4TEJc21APfUsw",se="gNHB91piJ8hkdioBOTb6";var me=a().memo((function(e){var t=e.onClose,n=e.onConfirm,i=e.isOpen,l=e.itemCount,u=(0,r.useCallback)((function(e){n(),t(e)}),[n,t]),s=o.ag.get("queue.confirm-title",l);return a().createElement(ie.Z,{shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:t,contentLabel:s,isOpen:i},a().createElement("div",{className:le},a().createElement(c.Dy,{as:"h2",variant:"cello",className:ue},s),a().createElement(c.Dy,{as:"p",variant:"mesto",className:ce,paddingBottom:J.g4V},o.ag.get("queue.confirm-message")),a().createElement("div",{className:oe},a().createElement(re.F,{property:ae.iY,renderOldExperience:function(){return a().createElement(ne.Y,{className:se,version:"tertiary",onClick:t},o.ag.get("queue.cancel-button"))},renderNewExperience:function(){return a().createElement(ee.oM,{onClick:t},o.ag.get("queue.cancel-button"))}}),a().createElement(re.F,{property:ae.iY,renderOldExperience:function(){return a().createElement(ne.Y,{version:"primary",onClick:u},o.ag.get("queue.confirm-button"))},renderNewExperience:function(){return a().createElement(te.D,{onClick:u},o.ag.get("queue.confirm-button"))}}))))})),de=n(40160),fe=n(83993),pe=function(){return a().createElement("div",{className:m},a().createElement(fe.j,{iconSize:64}),a().createElement(c.Dy,{as:"h1",variant:"alto",semanticColor:"textBase",className:d},o.ag.get("queue.empty-title")),a().createElement("p",null,o.ag.get("queue.empty-description")),a().createElement(de.OL,{to:"/search",className:f},a().createElement(ne.Y,{version:"secondary"},o.ag.get("queue.fine-something"))))},ve=n(11956),Ee=n(89952),ge=n(56802);n(85827);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(e,t){var n=S(e.slice(0,50).map((function(e){return e.uri})),t);return t?e.reduce((function(e,t,r){return n[r]&&e.push(function(e,t){return(0,Ee.G_)(e)&&function(e){return"track"===e.type}(t)?be(be({},e),{},{name:t.name,album:be(be({},e.album),{},{name:t.album.name,images:t.album.images,uri:t.album.uri}),artists:t.artists.map((function(e){return{name:e.name,uri:e.uri,type:U.p.ARTIST}})),duration:{milliseconds:t.duration_ms},isExplicit:t.explicit,is19PlusOnly:(t.tags||[]).includes("MOGEF-19+")}):(0,Ee.iw)(e)&&function(e){return"episode"===e.type}(t)?be(be({},e),{},{name:t.name,show:be(be({},e.show),{},{name:t.show.name,images:t.show.images,uri:t.show.uri}),duration:{milliseconds:t.duration_ms}}):e}(t,n[r])),e}),[]):e},Oe=a().memo((function(e){var t=e.tracks,n=e.ariaLabel,i=e.contextUri,l=e.rowNumberOffset,u=void 0===l?0:l,c=e.section,o=e.usePlayContextItem,s=(0,ge.o)(),m=(0,M.g)(),d=he(t,!m.getCapabilities().hasDecoratedQueue),f=(0,r.useCallback)((function(e,t){s({intent:"remove-from-queue",type:"click"}),m.removeFromQueue(e.map((function(e){return{uid:e.id,uri:e.uri}}))).then(t)}),[m,s]),p=(0,r.useCallback)((function(e,t){if((0,Ee.iw)(e)){var n,r,l=(0,j.X)(null===(n=e.show)||void 0===n?void 0:n.images,{desiredSize:40});return a().createElement(L.pD,{key:"".concat(t).concat(u).concat(e.uid),index:t,rowNumberOffset:u,imgUrl:(null==l?void 0:l.url)||"",uri:(0,T.$V)(e),uid:null!==(r=e.uid)&&void 0!==r?r:e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:L.jO.EPISODE,section:c,usePlayContextItem:o,isAutoPlay:"autoplay"===e.provider})}if((0,Ee.G7)(e)){var s,m=(0,j.X)(e.images||void 0,{desiredSize:40});return a().createElement(L.pD,{key:"".concat(t).concat(u).concat(e.uid),index:t,rowNumberOffset:u,imgUrl:(null==m?void 0:m.url)||"",uri:(0,T.$V)(e),uid:null!==(s=e.uid)&&void 0!==s?s:e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.book.name,uri:e.book.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:L.jO.CHAPTER,section:c,usePlayContextItem:o,isAutoPlay:"autoplay"===e.provider})}if((0,Ee.G_)(e)||(0,Ee.RB)(e)){var d,f,p,v,E=(0,j.X)(null==e||null===(d=e.album)||void 0===d?void 0:d.images,{desiredSize:40}),g=e.type===U.p.TRACK?e:null;return a().createElement(L.pD,{key:"".concat(t).concat(u).concat(e.uid),index:t,rowNumberOffset:u,imgUrl:(null==E?void 0:E.url)||"",uri:(0,T.$V)(e),uid:null!==(f=e.uid)&&void 0!==f?f:e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:null!==(p=null==g?void 0:g.isExplicit)&&void 0!==p&&p,isPlayable:!0,isMOGEFRestricted:null!==(v=null==g?void 0:g.is19PlusOnly)&&void 0!==v&&v,type:null!=g&&g.isLocal?L.jO.LOCAL:L.jO.TRACK,section:c,usePlayContextItem:o,isAutoPlay:"autoplay"===e.provider})}return a().createElement(L.Lb,{height:"".concat(L.dN,"px")})}),[u,i,c,o]),v=(0,r.useMemo)((function(){return[L.QD.INDEX,L.QD.TITLE,L.QD.ALBUM,L.QD.DURATION]}),[]),E=(0,r.useCallback)((function(e){return e.uri}),[]),g=(0,r.useCallback)((function(e){var t;return null!==(t=e.uid)&&void 0!==t?t:e.uri}),[]);return d&&a().createElement(L.Pv,{ariaLabel:n,tracks:d,nrTracks:d.length,onRemove:f,renderRow:p,resolveUri:E,resolveUid:g,columns:v})}));const ke="j9gyOcTuf365d_rG7ack",we="hwrIbokMLNi_FwQfqYcX",Ne="OSrSKCORKBO4JZclYmQ5",Ce="cTyAlv13Ivw6nbqmJ3rI",xe="EfpNdSaTi80IzFTHBH66";var De=function(){var e=(0,W.$)(),t=e.uri,n=e.description,i=(0,M.g)(),l=function(){var e=(0,M.g)(),t=(0,r.useState)(e.getQueue()),n=C()(t,2),a=n[0],i=n[1];return(0,z.G)(K.rg.QUEUE_UPDATE,(function(e){return i(e.data)})),a}(),u=l.current,s=l.nextUp,m=l.queued,d=(0,r.useState)(!1),f=C()(d,2),p=f[0],v=f[1],E=(0,r.useCallback)((function(){v(!1)}),[v]),y=(0,r.useCallback)((function(){i.clearQueue(),v(!1)}),[i]),b=(0,r.useCallback)((function(){v(!0)}),[v]),h=(0,V.n)({uri:null!=t?t:""},{featureIdentifier:"queue"}).usePlayContextItem,O="autoplay"===(null==u?void 0:u.provider),k=s.filter((function(e){return O?e:"autoplay"!==e.provider})),w=!(null==m||!m.length),N=!(null==k||!k.length);return!1===(u||w||N)?a().createElement(pe,null):a().createElement("section",{className:ke},a().createElement(H.$,null,o.ag.get("queue.page-title")),a().createElement(c.Dy,{as:"h1",variant:"canon",semanticColor:"textBase",className:we},o.ag.get("playback-control.queue")),u&&t&&a().createElement(a().Fragment,null,a().createElement(c.Dy,{as:"h2",variant:"balladBold",semanticColor:"textSubdued"},o.ag.get("queue.now-playing")),a().createElement(g.ZP,{value:"now-playing"},a().createElement(Oe,{ariaLabel:o.ag.get("queue.now-playing"),tracks:[u],contextUri:t,section:ve.h.NowPlaying,usePlayContextItem:h}))),w&&t&&a().createElement(a().Fragment,null,a().createElement("div",{className:F()(xe,Ne)},a().createElement(c.Dy,{as:"h2",variant:"balladBold",semanticColor:"textSubdued"},o.ag.get("queue.next-in-queue")),w&&a().createElement($,{onClick:b})),a().createElement(g.ZP,{value:"next-in-queue"},a().createElement(Oe,{ariaLabel:o.ag.get("queue.next-in-queue"),tracks:m,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",section:ve.h.NextInQueue,usePlayContextItem:h}))),N&&t&&a().createElement(a().Fragment,null,a().createElement(c.Dy,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",className:F()(Ne,"standalone-ellipsis-one-line")},n&&!O?a().createElement(a().Fragment,null,o.ag.get("queue.next-from")," ",a().createElement(Y.r,{className:Ce,to:t},n)):o.ag.get("queue.next-up")),a().createElement(g.ZP,{value:"next-up"},a().createElement(Oe,{ariaLabel:o.ag.get("queue.next-up"),tracks:k,rowNumberOffset:1+((null==m?void 0:m.length)||0),contextUri:"spotify:app:queue:NextUp",section:ve.h.NextUp,usePlayContextItem:h}))),a().createElement(me,{itemCount:(null==m?void 0:m.length)||0,isOpen:p,onClose:E,onConfirm:y}))},Pe=n(69559),Ie=n(9746),qe=n(28638);const Se="VBjBuss7tKOa3VZ_3tQI";var Ue=function(){var e=(0,r.useState)(window.innerWidth),t=C()(e,2),n=t[0],i=t[1];(0,Pe.a)((function(){i(window.innerWidth)}));var l=(0,r.useMemo)((function(){return[{title:o.ag.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue"},{title:o.ag.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]}),[]);return a().createElement(qe.w,null,a().createElement(Ie.n,{className:Se,links:l,windowSize:n}))},je=function(){var e=(0,u.nF)();return a().createElement("section",{className:"contentSpacing"},e&&a().createElement(l.No,{path:"/history",pageId:i.W.NOWPLAYING_HISTORY},a().createElement(_,null)),a().createElement(l.No,{path:"/queue",pageId:i.W.NOWPLAYING_QUEUE},a().createElement(r.Suspense,{fallback:null},a().createElement(De,null))),e&&a().createElement(Ue,null))};const Te=je},9746:(e,t,n)=>{n.d(t,{n:()=>q});var r=n(59713),a=n.n(r),i=n(63038),l=n.n(i),u=(n(91038),n(78783),n(21249),n(85827),n(41539),n(47042),n(89554),n(54747),n(57327),n(26699),n(32023),n(67294)),c=n.n(u),o=n(94184),s=n.n(o),m=n(28760),d=n(26115),f=n(74594),p=n(20657),v=n(32626),E=n(43031),g=n(30005),y=n(21691);const b="BkpKedcdaMGbvgXMlmcg",h="muYk5XIwKmqR9iNibk_f",O="queue-tabBar-header",k="m20ShRDiGGDpJ5LSABTi",w="Hvv0e7WKQ4kyftgSQJhg",N="yxf_6IsQEmHjijEBUMTP",C="oaNVBli46GtVjaQKB15g",x="JdlKTdpMquftpMwwegZo",D="Nts_ArOCGeROTDZND3M6",P="FvDsfgxSvLvL3q8d7nQv";var I=function(e){var t=e.items,n=e.activeItemId,r=e.setActiveDropdownItem;return c().createElement(g.v,null,t.map((function(e){return c().createElement(y.s,{key:e.to,role:"menuitemradio",to:e.to,exact:!0,"aria-checked":e.itemId===n,className:N,activeClassName:C,isActive:function(t){return!!t&&(r(e),!0)},onClick:function(){var t;null===(t=e.handleClick)||void 0===t||t.call(e),r(e)}},e.title)})))},q=c().memo((function(e){var t=e.isCentered,n=e.links,r=e.landmarkLabel,i=e.className,o=e.windowSize,g=void 0===o?1/0:o,y=(0,u.useState)(null),N=l()(y,2),q=N[0],S=N[1],U=(0,u.useRef)(null),j=(0,u.useState)([]),T=l()(j,2),L=T[0],A=T[1],B=(0,u.useState)(0),R=l()(B,2),Q=R[0],_=R[1],G=(0,u.useState)([]),F=l()(G,2),M=F[0],V=F[1];(0,u.useEffect)((function(){U.current&&_(U.current.clientWidth)}),[g]),(0,u.useEffect)((function(){if(U.current){var e=Array.from(U.current.children).map((function(e){return e.clientWidth}));A(e)}}),[n]),(0,u.useEffect)((function(){if(U.current)if(L.slice(0,-1).reduce((function(e,t){return e+t}),0)<=Q)V([]);else{var e=L.reduce((function(e,t){return e>t?e:t}),0),t=[],n=e;L.forEach((function(e,r){Q>=n+e?n+=e:t.push(r)})),V(t)}}),[Q,L]);var K=(0,u.useCallback)((function(e){return!!e&&(S(null),!0)}),[]);return c().createElement("nav",{className:s()(i,b),"aria-label":r},c().createElement("ul",{className:t?h:D,ref:U},n.filter((function(e,t){return!M.includes(t)})).map((function(e){return c().createElement("li",{key:e.to,className:O},c().createElement(E.O,{exact:!0,className:x,activeClassName:C,to:e.to,isActive:K,onClick:e.handleClick},c().createElement(m.Dy,{variant:"mestoBold"},e.title)))})),M.length||0===L.length?c().createElement("li",{className:O},c().createElement(v.xV,{renderInline:!0,menu:c().createElement(I,{items:n.filter((function(e,t){return M.includes(t)})),activeItemId:null==q?void 0:q.itemId,setActiveDropdownItem:S})},(function(e,t,n){return c().createElement("button",{className:s()(k,a()({},w,q)),type:"button",onClick:t,ref:n},c().createElement(m.Dy,{variant:"mestoBold"},q?q.title:p.ag.get("more")),e?c().createElement(d.q,{iconSize:16,className:P}):c().createElement(f.m,{iconSize:16,className:P}))}))):null))}))}}]);
//# sourceMappingURL=xpui-routes-queue.js.map