"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[376],{69376:(e,n,i)=>{i.r(n),i.d(n,{Album:()=>ce,default:()=>ke,getAlbumType:()=>re});var a=i(67154),t=i.n(a),l=i(67294),d=i.n(l),m=i(16528),s=i(96685),o=i(26115),r=i(74594),c=i(20657),u=i(30947),k=i(11414),v=i(55911),S=i(32626),g=i(20246),N=i(94233),F=i(53646),p=i(98984),b=i(4383),y=i(84242),h=i(7073),E=i(1663),f=i(56802),A=i(80322),w=i(4236),C=i(42811),I=i(90110),D=i(95661),T=i(13768),x=i(4232),M=i(70369),P=i(42273),U=i(59482),L=i(72907),z=i(6479),B=i.n(z),V=i(18937),q=i(74380),R=i(6489),W=i(91931),Y=i(38894);const Z=({children:e,content:n,onIntercept:i=(()=>{})})=>{const a=(0,Y.g)();let t;try{t=d().Children.only(e)}catch(n){return d().createElement(d().Fragment,null,e)}return a?d().createElement(W.Nt,{trigger:"click",action:"open",placement:"bottom",offset:[0,20],content:n},d().cloneElement(t,{onClick:i})):d().createElement(d().Fragment,null,e)};var _=i(65858),H=i(16229),$=i(1447),O=i(42922),X=i(70108);const j={container:"WHINADihyTCx2VFxwY8X"},K=({title:e,description:n})=>{const i=(0,_.I0)(),a=(0,$.qT)(),t=(0,f.o)();return(0,l.useEffect)((()=>{t({intent:"open-upsell",type:"view"})}),[t]),d().createElement(W.yv,null,d().createElement("div",{className:j.container},d().createElement(s.LF,{as:"p",className:j.title,variant:"cello"},e),d().createElement(s.LF,{as:"p",className:j.description,variant:"mesto"},n),d().createElement("div",{className:j.buttonContainer},d().createElement(H.Y,{className:j.secondaryButton,version:"tertiary",onClick:()=>{t({intent:"close-upsell",type:"click"}),a({type:"close"})}},c.ag.get("action-trigger.button.not-now")),d().createElement(H.Y,{className:j.primaryButton,version:"primary",onClick:()=>{t({intent:"login",type:"click"}),i((0,X.sX)())}},c.ag.get("login")))))},Q=e=>d().createElement(O.ZP,{value:"tooltip-with-cta"},d().createElement(K,e)),G=["uri"],J=e=>{let{uri:n}=e,i=B()(e,G);const a=(0,q.j5)();return d().createElement(Z,{content:d().createElement(Q,{title:c.ag.get("action-trigger.save-library"),description:c.ag.get("action-trigger.save-album")}),onIntercept:()=>a.storeAction(V.wH,{operation:R.pT.ADD,uris:[n]})},d().createElement(k.H,i))};var ee=i(55120),ne=i(19480),ie=i(36685);const ae={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getAlbumMetadata"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"album"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumArtists"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumCoverArt"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumDiscs"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumTracksMetadata"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumReleases"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}},{kind:"Field",name:{kind:"Name",value:"precision"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"copyright"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"text"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"courtesyLine"}},{kind:"Field",name:{kind:"Name",value:"saved"}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"moreAlbumsByArtist"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumCoverArt"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorRaw"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumDiscs"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"discs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumTracksMetadata"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumReleases"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releases"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"moreAlbumsByArtist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"moreAlbumsByArtist"},name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"year"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareId"}},{kind:"Field",name:{kind:"Name",value:"shareUrl"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]};var te=i(69518),le=i.n(te),de=i(30005),me=i(21691);const se=({releases:e})=>d().createElement(de.v,null,e.map((e=>d().createElement(me.s,{key:e.uri,role:"menuitem",to:le().from(e.uri).toURLPath(!0)},e.name)))),oe={album:"AzMeWBwDTXKzRBwYrMPA",albumWindowedMessage:"hM03zfC8SwDgrQj47qF3",albumWindowedMessageHeader:"Iqz89ir4iipYd5S9Zacw",albumWindowedMessageDescription:"gqmBZrZzSFhS7qnAeATS",moreAlbumsByArtist:"x-album-moreAlbumsByArtist",releasesDropdown:"Oes6sSZfoFflriJ35Vzb",footer:"DFSx0Puh2BjCKWFTvXgg"};function re(e){switch(e){case h.VZ.Single:return c.ag.get("single");case h.VZ.Ep:return c.ag.get("ep");case h.VZ.Compilation:return c.ag.get("compilation");case h.VZ.Album:default:return c.ag.get("album")}}const ce=({uri:e,album:n})=>{var i,a,p,E,z,B,V,q,R,W,Y,Z,_;const H=(0,m.k6)(),$=(0,f.o)(),O=(0,w.k)(),X=null===(i=n.moreAlbumsByArtist)||void 0===i||null===(a=i.items[0])||void 0===a||null===(p=a.discography)||void 0===p||null===(E=p.popularReleases)||void 0===E?void 0:E.items,[j,K]=(0,b.Z)(e),Q=parseInt(new URLSearchParams((0,m.TH)().search).get("index")||"0",10),G=(0,A.Y)(e),{usePlayContextItem:ae,togglePlay:te,isPlaying:le}=(0,y.n)({uri:G},{featureIdentifier:"album"}),de=(0,l.useCallback)((async()=>{$({targetUri:e,intent:j?"unsave":"save",type:"click"});try{await K(!j)}catch{}}),[$,e,j,K]),me=(0,l.useCallback)((()=>new URLSearchParams(H.location.search.slice(1)).get("highlight")||""),[H.location.search]),ce=n.uri,ue=n.name,ke=n.type,ve=null===(z=n.date)||void 0===z?void 0:z.isoString,Se=n.tracks.totalCount,ge=((null===(B=n.coverArt)||void 0===B?void 0:B.sources)||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),Ne=null===(V=n.coverArt)||void 0===V||null===(q=V.extractedColors)||void 0===q?void 0:q.colorRaw.hex,Fe=n.artists.items.map((e=>{var n;return{name:e.profile.name,images:((null===(n=e.visuals.avatarImage)||void 0===n?void 0:n.sources)||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),uri:e.uri,id:e.uri}})),pe=n.tracks.items.some((e=>e.track.playability.playable)),be=n.playability.reason===h.Ku.CatalogueRestricted,ye=(0,l.useMemo)((()=>({total_count:n.discs.totalCount,items:n.discs.items.map((e=>({number:e.number,total_tracks:e.tracks.totalCount})))})),[n.discs]),he=n.copyright.items,Ee=n.courtesyLine,fe=n.tracks.items.reduce(((e,n)=>e+n.track.duration.totalMilliseconds),0),Ae=n.tracks.items.length>0?fe/n.tracks.items.length*n.tracks.totalCount:0,we=n.tracks.items.length<n.tracks.totalCount,Ce=me(),Ie=O;return(0,F.Y5)(Ne||null),d().createElement("section",{className:oe.album,"data-testid":"album-page"},d().createElement(M.$,null,c.ag.get("album.page-title",n.name)),d().createElement(P.gF,{backgroundColor:Ne},d().createElement(U.W,null,d().createElement(ee.$,{size:v.qE.sm,onClick:()=>te(),disabled:!pe,isPlaying:le,uri:e}),d().createElement(L.i,{text:ue,dragUri:e,dragLabel:ue})),d().createElement(S._P,{menu:d().createElement(x.Y,{uri:n.uri,artistUri:null==Fe||null===(R=Fe[0])||void 0===R?void 0:R.uri,sharingInfo:n.sharingInfo})},d().createElement(P.Oz,{dragUri:ce,images:ge,name:ue,placeholderType:"album"})),d().createElement(P.sP,null,d().createElement(P.dy,{small:!0,uppercase:!0},re(ke)),d().createElement(S._P,{menu:d().createElement(x.Y,{uri:n.uri,artistUri:null==Fe||null===(W=Fe[0])||void 0===W?void 0:W.uri,sharingInfo:n.sharingInfo})},d().createElement(P.xd,{dragUri:n.uri,dragLabel:n.name},ue)),d().createElement(P.QS,{creators:Fe,releaseDate:ve,totalTracks:Se,durationMilliseconds:Ae,isEstimatedDuration:we}))),d().createElement(u.o,{backgroundColor:Ne},d().createElement(u.F,null,d().createElement(ee.$,{onClick:()=>te(),disabled:!pe,isPlaying:le,size:v.qE.lg,uri:e}),d().createElement(J,{isAdded:!!j,onClick:de,disabled:!O,size:k.q.md,uri:e}),Ie?d().createElement(I.o,{uri:e,isFollowing:!!j,onFollow:de,size:I.q.md}):null,d().createElement(g.y,{menu:d().createElement(x.Y,{uri:n.uri,artistUri:null==Fe||null===(Y=Fe[0])||void 0===Y?void 0:Y.uri,sharingInfo:n.sharingInfo})},d().createElement(D.z,{label:c.ag.get("more.label.context",ue)})))),be?d().createElement("div",{className:oe.albumWindowedMessage},d().createElement(s.LF,{as:"h2",variant:"cello",className:oe.albumWindowedMessageHeader},c.ag.get("windowed.product-album-header")),d().createElement("div",{className:oe.albumWindowedMessageDescription},c.ag.get("windowed.product-album-description"))):null,d().createElement("div",{className:"contentSpacing"},d().createElement(ie.L,{ariaLabel:ue,nrTracks:Se,discs:ye,albumUri:ce,highlightUri:Ce,scrollToIndex:Q,usePlayContextItem:ae}),d().createElement("div",{className:oe.footer},d().createElement(N.k,{copyrights:he,courtesyLine:Ee}),n.releases.items.length>0&&d().createElement(S.xV,{menu:d().createElement(se,{releases:n.releases.items})},((e,i,a)=>d().createElement("button",{ref:a,className:oe.releasesDropdown,type:"button",onClick:i},d().createElement(s.LF,{variant:"mesto"},c.ag.get("album-page.more-releases",n.releases.items.length)),e?d().createElement(o.q,{className:oe.chevron,iconSize:16}):d().createElement(r.m,{className:oe.chevron,iconSize:16})))))),(null==X?void 0:X.length)>0&&d().createElement("div",{className:"contentSpacing"},d().createElement(ne.P,{className:oe.moreAlbumsByArtist,title:c.ag.get("album-page.more-by-artist",null==Fe||null===(Z=Fe[0])||void 0===Z?void 0:Z.name),total:X.length,seeAllUri:`${null==Fe||null===(_=Fe[0])||void 0===_?void 0:_.uri.replace("artist","app:artist")}:discography`,seeAllLabel:c.ag.get("artist-page.show-discography"),alwaysShowSeeAll:!0},X.map(((e,n)=>{var i,a,l,m,s;return d().createElement(T.i,t()({index:n,key:null===(i=e.releases)||void 0===i||null===(a=i.items)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.uri},(0,C.B$)(e.releases.items[0],null==Fe||null===(m=Fe[0])||void 0===m?void 0:m.uri,null==Fe||null===(s=Fe[0])||void 0===s?void 0:s.name)))})))))},ue=d().memo((()=>{const{albumId:e}=(0,m.UO)(),n=`spotify:album:${e}`,{loading:i,error:a,data:t}=(l={uri:n},s={cacheTime:15*p.y},(0,p.a)(ae,l,s));var l,s;return i||null==t||!t.album?d().createElement(E.h,{hasError:null!==a,errorMessage:c.ag.get("error.not_found.title.album")}):d().createElement(ce,{uri:n,album:t.album})})),ke=ue},38894:(e,n,i)=>{i.d(n,{g:()=>l});var a=i(65858),t=i(29255);const l=()=>(0,a.v9)(t.Gg).isAnonymous}}]);
//# sourceMappingURL=376.js.map