"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[499],{70369:(e,t,r)=>{r.d(t,{$:()=>n.$});var n=r(22578)},37338:(e,t,r)=>{r.d(t,{T:()=>p});var n=r(63038),a=r.n(n),i=(r(68309),r(67294)),l=r.n(i),o=r(15212),u=r(25678),s=r(33732),c=r(42273),m=r(22023);const d="Ws8Ec3GREpT5PAUesr9b",g="kHu_FTRgoBLSLeAJtyKY";var p=function(e){var t=e.onClick,r=e.name,n=e.images,i=e.canEdit,p=e.placeholderType,f=e.shape,v=void 0===f?c.Kc.SQUARE:f,h=e.dragUri,y=void 0===h?"":h,b=(0,s.RH)(n),E=a()(b,2),w=E[0],k=E[1],I=(0,u.VO)(w,k)===u.KO.loaded,x=(0,o.O1)([y],r);return l().createElement("div",{className:d,"data-testid":"".concat(p,"-image"),draggable:!!y,onDragStart:x},l().createElement(c.Oe,{loading:"eager",name:r,images:n,placeholderType:p,shape:v}),i&&l().createElement("div",{className:g},l().createElement(m.F,{overlay:I,onClick:t,rounded:v===c.Kc.CIRCLE})))}},83617:(e,t,r)=>{r.r(t),r.d(t,{UserPage:()=>Lt,default:()=>jt});var n=r(67294),a=r.n(n),i=r(16528),l=r(69518),o=r.n(l),u=r(73305),s=r(46886),c=(r(21249),r(68309),r(94184)),m=r.n(c),d=r(30523),g=r(20657),p=r(48327),f=r(19719),v=r(1663),h=r(19480);const y={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",buddyFeedMinWidth:"72px",buddyFeedEmptyMinWidth:"270px",buddyFeedInitialWidth:"270px",buddyFeedMaxWidth:"384px",container:"QXcO3ZkoaTx7ioELX5tr",background:"vgKAVj_2xoRcBl9ICNNZ",overlay:"IN0XvLDk2awmwqfNQ1tZ",loggedOut:"EHqXITIBvBNaKhaIiv9s",historyButtons:"NlZEGmDvo0duN8ZjSqtH",icon:"sdvIOo6HP93UQFve8Vb9",button:"IitcTyulUx2LFKfxun17",forward:"yzVjnEBVuwpQaepom4U5",topbarContentWrapper:"BXKOn1F0CnBAetHcKEbq",topbarContent:"RKJ6mrTy2XuKy5MHMNsh",UpgradeButton:"ynhb4Y6kvf5ZHqIHNhNG",indicators:"SGPzDr6cIQzU9Cfp9qXd",contentArea:"ThLi85GOoMUjYUggFJcM",back:"sGzuRnzdqS9kmLQnQ0vY",user:"QcZDAy1SvCTuhg7mPrp8",section:"h7O8aVfJnA5HW66zEaxL",subPage:"e0rmaVvKqnNRHLE0aAKD",imageContainer:"hNTPwmaxPotdJ14dx2W9",topTrackSubPage:"zPlP6t5_EaxfMFCoXYKC",header:"bnUJ7AbYOXzytXCxj4AQ",title:"I0TU8ujta3nmI3e6yjgt",userVerifiedBadge:"g0dB9tB_EFbsxKHTHDxC"};var b=function(e){var t,r=e.uri,n=(0,p.J)(f.n5.getFollowers,[r]),i=n.data,l=n.loading,o=n.error,u=null==i||null===(t=i.body)||void 0===t?void 0:t.profiles;return l?a().createElement(v.h,{hasError:null!==o,errorMessage:g.ag.get("error.not_found.title.page")}):a().createElement(h.P,{className:m()("contentSpacing",y.subPage),title:g.ag.get("followers"),total:null==u?void 0:u.length,showAll:!0},null==u?void 0:u.map((function(e,t){return a().createElement(d.P,{key:e.uri,index:t,uri:e.uri,name:e.name,images:[{url:e.image_url}]})})))},E=function(e){var t,r=e.uri,n=(0,p.J)(f.n5.getFollowing,[r]),i=n.data,l=n.loading,o=n.error,u=null==i||null===(t=i.body)||void 0===t?void 0:t.profiles;return l?a().createElement(v.h,{hasError:null!==o,errorMessage:g.ag.get("error.not_found.title.page")}):a().createElement(h.P,{className:m()("contentSpacing",y.subPage),title:g.ag.get("following"),total:null==u?void 0:u.length,showAll:!0},null==u?void 0:u.map((function(e,t){return a().createElement(d.P,{key:e.uri,index:t,uri:e.uri,name:e.name,images:[{url:e.image_url}]})})))},w=r(63038),k=r.n(w),I=(r(41539),r(88674),r(65858)),x=r(30947),O=r(20246),P=r(18261),_=r(14535),N=r(18701),C=r(43620),A=r(46146),R=r(15429),T=r(49961),D=r(74563),S=r(56802),U=r(4236),M=r(94321),L=r(29255),j=r(52983),H=r(95661),F=r(89477),W=r(46309),B=r(43480),K=r(70369),z=r(37338),X=r(42273),G=r(98778),J=r(59482),Q=r(72907),V=r(48926),Z=r.n(V),Y=r(87757),q=r.n(Y),$=(r(73210),r(28760)),ee=r(79202),te=r(6060),re=r(16229),ne=r(85105),ae=r(50119),ie=r(95184),le=r(59713),oe=r.n(le),ue=r(83298),se=r(25678),ce=r(33732);const me="F8_EX1AeKxXNSeh1qiHq",de="valcBm4lLe9qFBcg0sFY",ge="tAIzXn8C9KriGwGuBfWg",pe="PsrXxenHUFXYM1ub1xWw",fe="U_VWfeeLWnDPhUTxCmrQ";var ve=function(e){var t=e.onClickEdit,r=e.onClickRemove,n=e.name,i=e.images,l=(0,ce.RH)(i),o=k()(l,2),u=o[0],s=o[1],c=(0,se.VO)(u,s)===se.KO.loaded;return a().createElement("div",{className:me},a().createElement(X.Oe,{loading:"eager",name:n,images:i,placeholderType:"user",shape:X.Kc.CIRCLE}),a().createElement("div",{className:m()(de,oe()({},pe,c))},a().createElement("button",{className:ge,"aria-haspopup":"true",onClick:t,type:"button"},a().createElement($.Dy,{variant:"ballad"},g.ag.get("user.edit-details.choose-photo"))),a().createElement("div",{className:m()(fe,"icon")},a().createElement(ue.f,{iconSize:48,"aria-hidden":!0})),a().createElement("button",{className:ge,onClick:r,type:"button"},a().createElement($.Dy,{variant:"ballad"},g.ag.get("user.edit-details.remove-photo")))))},he=r(80624),ye=(r(92222),r(16516)),be=(r(66992),r(39575),r(82472),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(9653),r(5735),r(83753),r(47941),r(82526),r(57327),r(38880),r(89554),r(54747),r(49337),r(33321),r(69070),r(47042),r(91038),r(78783),r(74916),r(41817),r(32165),r(33948),r(79753),r(62100));function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){oe()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xe={paths:""},Oe=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be.Writer.create(),n=ke(e.paths);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.uint32(10).string(a)}}catch(e){n.e(e)}finally{n.f()}return r},Pe=function(e){var t=we({},xe);if(t.paths=[],void 0!==e.paths&&null!==e.paths){var r,n=ke(e.paths);try{for(n.s();!(r=n.n()).done;){var a=r.value;t.paths.push(a)}}catch(e){n.e(e)}finally{n.f()}}return t},_e=(r(83710),r(39714),r(65743),r(69600),r(43720)),Ne=r(48764).Buffer;var Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be.Writer.create();return t.uint32(8).int32(e.value),t},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be.Writer.create();return t.uint32(8).bool(e.value),t},Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be.Writer.create();return t.uint32(10).string(e.value),t};be.util.Long!==_e&&(be.util.Long=_e,(0,be.configure)());var Te=globalThis;Te.atob,Te.btoa;function De(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){oe()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Le={maxWidth:0,maxHeight:0,url:""},je={},He={},Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be.Writer.create();return t.uint32(8).int32(e.maxWidth),t.uint32(16).int32(e.maxHeight),t.uint32(26).string(e.url),t},We=function(e){var t=Me({},Le);return void 0!==e.maxWidth&&null!==e.maxWidth?t.maxWidth=e.maxWidth:t.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?t.maxHeight=e.maxHeight:t.maxHeight=0,void 0!==e.url&&null!==e.url?t.url=e.url:t.url="",t},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be.Writer.create();void 0!==e.username&&void 0!==e.username&&Re({value:e.username},t.uint32(10).fork()).ldelim(),void 0!==e.name&&void 0!==e.name&&Re({value:e.name},t.uint32(18).fork()).ldelim();var r,n=De(e.images);try{for(n.s();!(r=n.n()).done;){var a=r.value;Fe(a,t.uint32(26).fork()).ldelim()}}catch(e){n.e(e)}finally{n.f()}return void 0!==e.verified&&void 0!==e.verified&&Ae({value:e.verified},t.uint32(34).fork()).ldelim(),void 0!==e.editProfileDisabled&&void 0!==e.editProfileDisabled&&Ae({value:e.editProfileDisabled},t.uint32(42).fork()).ldelim(),void 0!==e.reportAbuseDisabled&&void 0!==e.reportAbuseDisabled&&Ae({value:e.reportAbuseDisabled},t.uint32(50).fork()).ldelim(),void 0!==e.abuseReportedName&&void 0!==e.abuseReportedName&&Ae({value:e.abuseReportedName},t.uint32(58).fork()).ldelim(),void 0!==e.abuseReportedImage&&void 0!==e.abuseReportedImage&&Ae({value:e.abuseReportedImage},t.uint32(66).fork()).ldelim(),void 0!==e.hasSpotifyName&&void 0!==e.hasSpotifyName&&Ae({value:e.hasSpotifyName},t.uint32(74).fork()).ldelim(),void 0!==e.hasSpotifyImage&&void 0!==e.hasSpotifyImage&&Ae({value:e.hasSpotifyImage},t.uint32(82).fork()).ldelim(),void 0!==e.color&&void 0!==e.color&&Ce({value:e.color},t.uint32(90).fork()).ldelim(),t},Ke=function(e){var t=Me({},je);if(t.images=[],void 0!==e.username&&null!==e.username?t.username=e.username:t.username=void 0,void 0!==e.name&&null!==e.name?t.name=e.name:t.name=void 0,void 0!==e.images&&null!==e.images){var r,n=De(e.images);try{for(n.s();!(r=n.n()).done;){var a=r.value;t.images.push(We(a))}}catch(e){n.e(e)}finally{n.f()}}return void 0!==e.verified&&null!==e.verified?t.verified=e.verified:t.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?t.editProfileDisabled=e.editProfileDisabled:t.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?t.reportAbuseDisabled=e.reportAbuseDisabled:t.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?t.abuseReportedName=e.abuseReportedName:t.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?t.abuseReportedImage=e.abuseReportedImage:t.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?t.hasSpotifyName=e.hasSpotifyName:t.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?t.hasSpotifyImage=e.hasSpotifyImage:t.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?t.color=e.color:t.color=void 0,t},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be.Writer.create();return void 0!==e.mask&&void 0!==e.mask&&Oe(e.mask,t.uint32(10).fork()).ldelim(),void 0!==e.userProfile&&void 0!==e.userProfile&&Be(e.userProfile,t.uint32(18).fork()).ldelim(),t},Xe=function(e){var t=Me({},He);return void 0!==e.mask&&null!==e.mask?t.mask=Pe(e.mask):t.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?t.userProfile=Ke(e.userProfile):t.userProfile=void 0,t},Ge="".concat(ye.XA,"/identity");function Je(e,t,r){return Qe.apply(this,arguments)}function Qe(){return(Qe=Z()(q().mark((function e(t,r,n){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.build().withHost(Ge).withMethod("POST").withPath("/v3/profile-image/".concat(encodeURIComponent((0,R.C)(r)),"/").concat(n)).withEndpointIdentifier("/v3/profile-image/{username}/{uploadToken}").withoutMarket().send();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=Z()(q().mark((function e(t,r){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.build().withHost(Ge).withMethod("DELETE").withPath("/v3/profile-image/".concat(encodeURIComponent((0,R.C)(r)))).withEndpointIdentifier("/v3/profile-image/{username}").withoutMarket().send();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t,r){return qe.apply(this,arguments)}function qe(){return(qe=Z()(q().mark((function e(t,r,n){var a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ze(Xe({mask:{paths:["name"]},userProfile:null!==n?{name:n}:{}})),e.next=3,t.build().withHost(Ge).withMethod("POST").withPath("/v3/user/username/".concat(encodeURIComponent((0,R.C)(r)))).withEndpointIdentifier("/v3/user/username/{username}").withBody(a.finish()).withoutMarket().send();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e,t,r){return et.apply(this,arguments)}function et(){return(et=Z()(q().mark((function e(t,r,n){var a,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.name,i=n.imageUploadToken,void 0===a){e.next=4;break}return e.next=4,Ye(t,r,a);case 4:if(void 0===i){e.next=12;break}if(null===i){e.next=10;break}return e.next=8,Je(t,r,i);case 8:e.next=12;break;case 10:return e.next=12,Ve(t,r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tt="https://image-upload.spotify.com/v4";function rt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=Z()(q().mark((function e(t,r){var n,a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.name,a=r.imageUploadToken,e.next=3,$e(he.b.getInstance(),t,{name:n,imageUploadToken:a});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return it.apply(this,arguments)}function it(){return(it=Z()(q().mark((function e(t){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.b.getInstance().build().withEndpointIdentifier("image-upload/v4/user-profile").withHost(tt).withMethod("POST").withPath("/user-profile").withBody(t).withoutGlobalHeaders().withHeaders([{key:"Content-Type",value:"image/jpeg"}]).withoutMarket().send();case 2:if((r=e.sent).body){e.next=5;break}throw new Error("No upload token recieved");case 5:return e.abrupt("return",r.body.uploadToken);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lt={type:"error",get message(){return g.ag.get("user.edit-details.error.file-size-exceeded",4)}},ot={type:"error",get message(){return g.ag.get("user.edit-details.error.too-small",300,300)}},ut={type:"error",get message(){return g.ag.get("user.edit-details.error.missing-name")}},st={type:"error",get message(){return g.ag.get("user.edit-details.error.failed-to-save")}},ct={type:"error",get message(){return g.ag.get("user.edit-details.error.file-upload-failed")}};function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){oe()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e){return{type:"setLoading",loading:e}}function pt(e){return{type:"setMessage",message:e}}function ft(e){return{type:"setImageData",data:e}}function vt(e){return{type:"setImageToken",token:e}}function ht(e,t){switch(t.type){case"setName":return dt(dt({},e),{},{name:t.name});case"setMessage":return dt(dt({},e),{},{message:t.message,loading:!1});case"setLoading":return dt(dt({},e),{},{loading:t.loading,message:null});case"setImageData":return dt(dt({},e),{},{imageData:t.data,removeImage:!1});case"setImageToken":return dt(dt({},e),{},{imageToken:t.token,removeImage:!1});case"removeImage":return dt(dt({},e),{},{imageToken:void 0,imageData:void 0,image:void 0,removeImage:!0});default:return e}}const yt={container:"XwNfIrI6_hCa_9_T2cQB",content:"so0bdX3oZH6YW5_nGxIR",header:"aM3plU4zzDqjWlvUHGYb",closeBtn:"zHeo4VUxytwm6Ptr0QyA",image:"vAeyAmeLkDEDKdL9Hou0",imageLoadingContainer:"dnmzO6yYKkxUV8jl7O1Z",textElement:"oN9QVvJKEtdTH3HGfCu1",name:"uj7hczcCH1dZpse8Kfmi",textElementLabel:"wvLAEV5wF5C5ej6rvimT",labelText:"gAQfzAUp1FuSXODeZJfP",nameInput:"dMhJaxli87_22jb_3d9x",save:"MDb7QhAtHeyM4gKj8j8t",disclaimer:"zGbjZMZ1DTx4futEbN9l"};var bt=a().memo((function(e){var t=e.uri,r=e.name,i=e.image,l=e.onClose,o=e.shouldOpenImagePicker,u=(0,ae.Hs)(),s=k()(u,2),c=s[0],d=s[1],p=function(e){var t=e.name,r=e.image;return(0,n.useReducer)(ht,{loading:!1,message:null,name:t,image:r})}({name:r,image:i}),f=k()(p,2),v=f[0],h=f[1],y=(0,n.useMemo)((function(){var e=v.imageData||v.image;return e?[{url:e,width:300,height:300}]:[]}),[v.image,v.imageData]);function b(){return(b=Z()(q().mark((function e(t){var r,n,a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(r=t.imageFile,n=t.imageDataUrl,h(pt(null)),h(ft(n)),!r){e.next=18;break}return e.prev=6,h(gt(!0)),e.next=10,at(r);case 10:a=e.sent,h(vt(a)),h(gt(!1)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),h(pt(ct));case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}(0,n.useEffect)((function(){o&&d()}),[d,o]);var E=(0,n.useCallback)((function(e){e===ae.Hy.FILE_TOO_BIG?h(pt(lt)):e===ae.Hy.IMAGE_TOO_SMALL&&h(pt(ot))}),[h]),w=(0,n.useCallback)((function(){h({type:"removeImage"})}),[h]),I=(0,n.useCallback)(function(){var e=Z()(q().mark((function e(r){var n;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),0!==v.name.trim().length){e.next=5;break}return h(pt(ut)),e.abrupt("return");case 5:return h(gt(!0)),e.prev=6,n=v.removeImage?null:v.imageToken,e.next=10,rt(t,{name:v.name,imageUploadToken:n});case 10:l({name:v.name,image:v.imageData||v.image}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),h(pt(st));case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),[h,l,v.image,v.imageData,v.imageToken,v.name,v.removeImage,t]);return a().createElement(ne.Z,{isOpen:!0,contentLabel:g.ag.get("user.edit-details.title"),onRequestClose:function(){return l()}},a().createElement("div",{className:yt.container},a().createElement("div",{className:yt.header},a().createElement($.Dy,{as:"h1",className:yt.heading,variant:"canon"},g.ag.get("user.edit-details.title")),a().createElement("button",{className:yt.closeBtn,onClick:function(){return l()},"aria-label":g.ag.get("close")},a().createElement(ee.j,{iconSize:16}))),v.message&&a().createElement(ie.X,{isErrorMessage:"error"===v.message.type,message:v.message.message}),a().createElement("form",{className:yt.content,onSubmit:I},a().createElement(ae.uL,{isOpen:c,minImageWidth:300,minImageHeight:300,maxFileSizeMB:4,onChange:function(e){return b.apply(this,arguments)},onError:E}),a().createElement("div",{className:yt.image},a().createElement(ve,{name:r,images:y,onClickEdit:d,onClickRemove:w}),v.loading&&a().createElement("div",{className:yt.imageLoadingContainer},a().createElement(te.T,null))),a().createElement("div",{className:yt.name},a().createElement("label",{htmlFor:"user-edit-name",className:yt.textElementLabel},a().createElement($.Dy,{variant:"finaleBold",className:yt.labelText},g.ag.get("user.edit-details.name-label"))),a().createElement("input",{"data-testid":"user-edit-name-input",id:"user-edit-name",type:"text",dir:"auto",className:m()(yt.textElement,yt.nameInput),onChange:function(e){h(function(e){return{type:"setName",name:e}}(e.target.value))},placeholder:g.ag.get("user.edit-details.name-placeholder"),maxLength:32,value:v.name})),a().createElement(re.Y,{version:"secondary",className:yt.save,onClick:I,disabled:v.loading},g.ag.get("save")),a().createElement($.Dy,{as:"p",variant:"finaleBold",className:yt.disclaimer},g.ag.get("image-upload.legal-disclaimer")))))})),Et=r(13218),wt=r(47991),kt=r(42922),It=r(84242),xt=r(42781),Ot=r(28248),Pt=r(48852),_t=a().memo((function(e){var t=e.tracks,r=e.hasHeaderRow,i=void 0!==r&&r,l=e.nrTracksVisible,u=e.uri,s=(0,R.C)(u),c=o().userToplistURI(s,"tracks").toURI(),m=(0,n.useMemo)((function(){return l?t.slice(0,l):t}),[l,t]),d=(0,It.n)({uri:c,pages:[{items:t.map((function(e){return{type:xt.p.TRACK,uri:e.uri,uid:null,provider:null}}))}]},{featureIdentifier:"profile",referrerIdentifier:"user_profile"}).usePlayContextItem,p=(0,n.useCallback)((function(e,t){var r,n=(0,T.X)(null==e||null===(r=e.album)||void 0===r?void 0:r.images,{desiredSize:40});return a().createElement(Pt.SS,{key:t+e.uri,index:t,uri:(0,wt.$V)(e),duration_ms:e.duration_ms,name:e.name,artists:e.artists,album:e.album,isPlayable:!0,isExplicit:!!e.explicit,isMOGEFRestricted:!!e.mogef19,imgUrl:(null==n?void 0:n.url)||"",contextUri:c,usePlayContextItem:d})}),[c,d]),f=(0,n.useMemo)((function(){return[Ot.QD.INDEX,Ot.QD.TITLE,Ot.QD.ALBUM,Ot.QD.DURATION]}),[]),v=(0,n.useCallback)((function(e){return e.uri}),[]);return a().createElement(kt.ZP,{value:"user-top-tracks-tracklist"},a().createElement(Ot.Pv,{ariaLabel:g.ag.get("top_tracks_this_month"),renderRow:p,nrTracks:m.length,tracks:m,resolveUri:v,hasHeaderRow:i,columns:f}))}),(function(e,t){return e.tracks===t.tracks})),Nt=a().memo((function(e){var t=e.tracks,r=e.title,n=e.tagline,i=e.seeAllUri,l=e.className,o=e.uri;if(!t||0===t.length)return null;var u=t.length>4;return a().createElement("section",{className:l},a().createElement(Et.r,{title:r,tagline:n,seeAllUri:i,hasMoreElements:u}),a().createElement(_t,{tracks:t,uri:o,nrTracksVisible:4}))}),(function(e,t){return e.tracks===t.tracks}));function Ct(e,t){switch(t.type){case"OPEN_MODAL":return{isModalOpen:!0,shouldOpenImagePicker:!1};case"OPEN_MODAL_WITH_IMAGEPICKER":return{isModalOpen:!0,shouldOpenImagePicker:!0};case"CLOSE_MODAL":return{isModalOpen:!1,shouldOpenImagePicker:!1};default:return e}}var At=function(e){var t,r,i,l,u=e.uri,s=(0,I.v9)(L.Gf),c=(0,I.v9)(L.A$),b=(0,I.I0)(),E=(0,A.H)(u),w=k()(E,2),V=w[0],Z=w[1],Y=(0,n.useMemo)((function(){return(0,T.X)(c)}),[c]),q=(i=(0,n.useReducer)(Ct,{isModalOpen:!1,shouldOpenImagePicker:!1}),[(l=k()(i,2))[0],l[1]]),$=k()(q,2),ee=$[0],te=ee.isModalOpen,re=ee.shouldOpenImagePicker,ne=$[1],ae=(0,S.o)(),ie=!(0,U.k)(),le=(0,p.J)(f.n5.getProfile,[{uri:u,playlists:10,artists:10}]),oe=le.data,ue=le.loading,se=null==oe?void 0:oe.body,ce=null==se?void 0:se.public_playlists,me=null==se?void 0:se.is_verified,de=(null==se?void 0:se.is_current_user)||!1,ge=null==se?void 0:se.recently_played_artists,pe=de?(null==Y?void 0:Y.url)||"":(null==se?void 0:se.image_url)||"",fe=(0,R.C)(u),ve=(0,I.v9)(M.C7),he=(de?s:null==se?void 0:se.name)||"",ye=(0,C.Z)((null==se?void 0:se.image_url)||null),be=(0,p.J)(f.n5.getFollowing,[u]),Ee=be.data,we=be.loading,ke=null==Ee||null===(t=Ee.body)||void 0===t?void 0:t.profiles,Ie=(0,p.J)(f.n5.getFollowers,[u]),xe=Ie.data,Oe=Ie.loading,Pe=null==xe||null===(r=xe.body)||void 0===r?void 0:r.profiles,_e=(0,n.useMemo)((function(){return function(e){return e?f.n5.getUserTopArtists:function(){return Promise.resolve({status:200,body:{items:[],offset:0,limit:0,total:0,href:"",next:null,previous:null}})}}(de)}),[de]),Ne=(0,n.useMemo)((function(){return function(e){return e?f.n5.getUserTopTracks:function(){return Promise.resolve({status:200,body:{items:[],offset:0,limit:0,total:0,href:"",next:null,previous:null}})}}(de&&!ve)}),[de,ve]),Ce=(0,p.J)(_e,[]),Ae=Ce.data,Re=Ce.loading,Te=(0,p.J)(Ne,[]),De=Te.data,Se=Te.loading,Ue=null==Ae?void 0:Ae.body,Me=null==De?void 0:De.body,Le=(0,n.useCallback)((function(){ae({targetUri:u,intent:V?"unfollow":"follow",type:"click"}),Z(!V)}),[V,ae,Z,u]),je=(0,n.useCallback)((function(e){ne({type:"CLOSE_MODAL"}),e&&(b((0,j.dL)(e.name)),b((0,j.GR)(e.image?[{url:e.image,height:null,width:null}]:[])))}),[b,ne]),He=(0,n.useCallback)((function(){return ne({type:"OPEN_MODAL"})}),[ne]),Fe=(0,n.useCallback)((function(){ne({type:"OPEN_MODAL_WITH_IMAGEPICKER"})}),[ne]),We=(0,n.useMemo)((function(){return[{url:pe}]}),[pe]);if(!se||ue||we||Oe||Se||Re)return a().createElement(v.h,{hasError:!1,errorMessage:g.ag.get("error.not_found.title.page")});var Be={total:se.followers_count},Ke=m()("contentSpacing",y.section,y.shelf);return a().createElement("div",{className:y.user},a().createElement(K.$,null,he),a().createElement(X.gF,{backgroundColor:ye},a().createElement(J.W,null,a().createElement(Q.i,{text:he})),a().createElement(P._,{menu:a().createElement(B.I,{uri:se.uri})},a().createElement("div",{className:y.imageContainer},a().createElement(z.T,{canEdit:de,name:he,images:We,onClick:Fe,placeholderType:"user",shape:X.Kc.CIRCLE}))),a().createElement(X.sP,null,a().createElement(X.dy,{small:!0,uppercase:!0},me&&a().createElement("span",{className:y.userVerifiedBadge},a().createElement(N.S,null)),g.ag.get("card.tag.profile")),a().createElement(P._,{menu:a().createElement(B.I,{uri:se.uri})},a().createElement(X.xd,{canEdit:de,editTitle:g.ag.get("playlist.edit-details.title"),onClick:He},he)),a().createElement(X.QS,{totalFollowers:Be.total,totalFollowing:null==ke?void 0:ke.length,publicPlaylists:se.total_public_playlists_count,userUri:u}))),a().createElement(x.o,{backgroundColor:ye},a().createElement(x.F,null,!de&&a().createElement(G.r,null,a().createElement(_.e,{isFollowing:Boolean(V),onClick:Le,disabled:ie})),a().createElement(O.y,{menu:a().createElement(B.I,{uri:se.uri,onEditProfileCallback:He})},a().createElement(H.z,{label:g.ag.get("more.label.context",he)})))),a().createElement(h.P,{className:Ke,total:(null==Ue?void 0:Ue.total)||0,title:g.ag.get("top_artists_this_month"),tagline:g.ag.get("only_visible_to_you"),seeAllUri:o().profileURI(fe,["top","artists"]).toURI()},null==Ue?void 0:Ue.items.map((function(e,t){return a().createElement(F.I,{index:t,key:e.uri,uri:e.uri,name:e.name,images:e.images})}))),a().createElement(Nt,{className:Ke,title:g.ag.get("top_tracks_this_month"),tagline:g.ag.get("only_visible_to_you"),seeAllUri:o().profileURI(fe,["top","tracks"]).toURI(),uri:u,tracks:null==Me?void 0:Me.items}),a().createElement(h.P,{className:Ke,total:se.total_public_playlists_count,title:g.ag.get("public_playlists"),seeAllUri:o().profileURI(fe,["playlists"]).toURI()},null==ce?void 0:ce.map((function(e,t){return a().createElement(W.Z,{index:t,key:e.uri,uri:e.uri,name:e.name,images:[{url:(0,D.p)({imageUriOrUrl:e.image_url}),width:300,height:300}],authorName:e.owner_name,description:e.followers_count?g.ag.get("user.followers",e.followers_count):""})}))),null!=ge&&ge.length?a().createElement(h.P,{className:Ke,total:null==ge?void 0:ge.length,title:g.ag.get("recently_played_artists"),seeAllUri:o().profileURI(fe,["recently-played-artists"]).toURI()},null==ge?void 0:ge.map((function(e,t){return a().createElement(F.I,{index:t,key:e.uri,uri:e.uri,name:e.name,images:[{url:e.image_url}]})}))):null,null!=Pe&&Pe.length?a().createElement(h.P,{className:Ke,title:g.ag.get("followers"),total:null==Pe?void 0:Pe.length,seeAllUri:o().profileURI(fe,["followers"]).toURI()},null==Pe?void 0:Pe.map((function(e,t){return a().createElement(d.P,{key:e.uri,index:t,uri:e.uri,name:e.name,images:[{url:e.image_url}]})}))):null,null!=ke&&ke.length?a().createElement(h.P,{className:Ke,title:g.ag.get("following"),total:null==ke?void 0:ke.length,seeAllUri:o().profileURI(fe,["following"]).toURI()},null==ke?void 0:ke.map((function(e,t){return a().createElement(d.P,{key:e.uri,index:t,uri:e.uri,name:e.name,images:[{url:e.image_url}]})}))):null,de&&te?a().createElement(bt,{uri:u,name:he,image:pe,onClose:je,shouldOpenImagePicker:re}):null)},Rt=function(e){var t=e.uri,r=(0,p.J)(f.n5.getPlaylists,[{uri:t}]),n=r.data,i=r.loading,l=r.error,o=(null==n?void 0:n.body)||{},u=o.public_playlists,s=o.total_public_playlists_count,c=void 0===s?0:s;return i?a().createElement(v.h,{hasError:null!==l,errorMessage:g.ag.get("error.not_found.title.page")}):a().createElement(h.P,{className:m()("contentSpacing",y.subPage),total:c,title:g.ag.get("public_playlists"),showAll:!0},null==u?void 0:u.map((function(e,t){return a().createElement(W.Z,{index:t,key:e.uri,uri:e.uri,name:e.name,authorName:e.owner_name,description:e.followers_count?g.ag.get("user.followers",e.followers_count):"",images:[{url:(0,D.p)({imageUriOrUrl:e.image_url}),width:300,height:300}]})})))},Tt=function(e){var t,r=e.uri,n=(0,p.J)(f.n5.getRecentlyPlayedArtists,[{uri:r,limit:50}]),i=n.data,l=n.loading,o=n.error,u=null==i||null===(t=i.body)||void 0===t?void 0:t.artists;return l?a().createElement(v.h,{hasError:null!==o,errorMessage:g.ag.get("error.not_found.title.page")}):a().createElement(h.P,{className:m()("contentSpacing",y.subPage),total:null==u?void 0:u.length,title:g.ag.get("recently_played_artists"),showAll:!0},null==u?void 0:u.map((function(e,t){return a().createElement(F.I,{index:t,key:e.uri,name:e.name,uri:e.uri,images:[{url:e.image_url}]})})))},Dt=function(){var e=(0,p.J)(f.n5.getUserTopArtists),t=e.data,r=e.loading,n=e.error,i=null==t?void 0:t.body;return r?a().createElement(v.h,{hasError:null!==n,errorMessage:g.ag.get("error.not_found.title.page")}):i?a().createElement(h.P,{className:m()("contentSpacing",y.subPage),total:i.items.length,title:g.ag.get("top_artists_this_month"),tagline:g.ag.get("only_visible_to_you"),showAll:!0},i.items.map((function(e,t){return a().createElement(F.I,{key:e.uri,index:t,uri:e.uri,name:e.name,images:e.images})}))):null},St=function(e){var t=e.uri,r=(0,p.J)(f.n5.getProfile,[{uri:t}]),n=r.data,i=r.loading,l=r.error,o=null==n?void 0:n.body,u=(null==o?void 0:o.is_current_user)||!1;return o&&!i&&u?a().createElement(Dt,null):a().createElement(v.h,{hasError:null!==l,errorMessage:g.ag.get("error.not_found.title.page")})},Ut=function(e){var t=e.uri,r=(0,p.J)(f.n5.getUserTopTracks,[{offset:0,limit:50}]),n=r.data,i=r.loading,l=r.error,o=null==n?void 0:n.body;return i?a().createElement(v.h,{hasError:null!==l,errorMessage:g.ag.get("error.not_found.title.page")}):o?a().createElement("div",{className:m()("contentSpacing",y.subPage,y.topTrackSubPage)},a().createElement("div",{className:y.header},a().createElement($.Dy,{as:"h1",variant:"canon",className:y.title},g.ag.get("top_tracks_this_month")),a().createElement($.Dy,{as:"p",variant:"mesto"},g.ag.get("only_visible_to_you"))),a().createElement(_t,{tracks:o.items,uri:t,hasHeaderRow:!0})):null},Mt=function(e){var t=e.uri,r=(0,p.J)(f.n5.getProfile,[{uri:t}]),n=r.data,i=r.loading,l=r.error,o=null==n?void 0:n.body,u=(null==o?void 0:o.is_current_user)||!1;return o&&!i&&u?a().createElement(Ut,{uri:t}):a().createElement(v.h,{hasError:null!==l,errorMessage:g.ag.get("error.not_found.title.page")})},Lt=a().memo((function(){var e=(0,i.UO)().userId,t=decodeURIComponent(e),r=o().profileURI(t).toURI();return a().createElement("section",null,a().createElement(s.No,{exact:!0,path:"/user/:userId/playlists",pageId:u.W.PROFILE_PLAYLISTS},a().createElement(Rt,{uri:r})),a().createElement(s.No,{exact:!0,path:"/user/:userId/top/tracks",pageId:u.W.PROFILE_TOP_TRACKS},a().createElement(Mt,{uri:r})),a().createElement(s.No,{exact:!0,path:"/user/:userId/top/artists",pageId:u.W.PROFILE_TOP_ARTISTS},a().createElement(St,{uri:r})),a().createElement(s.No,{exact:!0,path:"/user/:userId/recently-played-artists",pageId:u.W.PROFILE_RECENTLY_PLAYED_ARTISTS},a().createElement(Tt,{uri:r})),a().createElement(s.No,{exact:!0,path:"/user/:userId/following",pageId:u.W.PROFILE_FOLLOWING},a().createElement(E,{uri:r})),a().createElement(s.No,{exact:!0,path:"/user/:userId/followers",pageId:u.W.PROFILE_FOLLOWERS},a().createElement(b,{uri:r})),a().createElement(s.No,{exact:!0,path:"/user/:userId",pageId:u.W.PROFILE},a().createElement(At,{uri:r})))}));const jt=Lt},14535:(e,t,r)=>{r.d(t,{e:()=>g});var n=r(59713),a=r.n(n),i=r(67294),l=r.n(i),o=r(20657),u=r(94184),s=r.n(u);const c="aAr9nYtPsG7P2LRzciXc",m="fBTYgGyvIbHizHIj7AAX",d="oUzIIkcyBdRs7hrwbwIo";var g=l().memo((function(e){var t,r=e.isFollowing,n=e.onClick,i=e.disabled,u=void 0!==i&&i,g=e.buttonText,p=r?o.ag.get("following"):o.ag.get("follow");return l().createElement("button",{type:"button",className:s()(c,(t={},a()(t,m,r),a()(t,d,u),t)),onClick:n},g||p)}))},18701:(e,t,r)=>{r.d(t,{S:()=>i});var n=r(67294),a=r.n(n),i=function(){return a().createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a().createElement("path",{d:"M12 21.6596l-3.38079 1.8543-1.84158-3.3877-3.84662-.2679.28231-3.8456-3.09118-2.3049 2.31658-3.0825-1.3543-3.61028 3.61534-1.34071.81255-3.76935 3.76627.82672L12 0l2.7214 2.73168 3.7663-.82672.8125 3.76935 3.6154 1.34071-1.3543 3.61028 2.3166 3.0825-3.0912 2.3049.2823 3.8456-3.8466.2679-1.8416 3.3877L12 21.6596z",fill:"#2E77D0"}),a().createElement("path",{d:"M16.8637 7.41226l-6.6435 7.77824-2.80421-3.2842-.4935.5775 3.29771 3.8617 7.2135-8.44649-.57-.48675z",fill:"#fff"}))}}}]);
//# sourceMappingURL=xpui-routes-profile.js.map