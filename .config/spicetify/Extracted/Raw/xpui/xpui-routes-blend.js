"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[8123],{9797:(e,t,i)=>{i.d(t,{l:()=>h});var n=i(652),l=i(12075),a=i(42986),o=i(95610),s=i(6422),r=i(4637);const d={[a.Uo.MEDIUM]:"alto",[a.Uo.LARGE]:"alto",[a.Uo.XLARGE]:"forte"},c={[a.Uo.LARGE]:"ballad",[a.Uo.XLARGE]:"cello"},u={[a.Uo.LARGE]:"viola",[a.Uo.XLARGE]:"viola"},h=({title:e,subtitle:t,body:i,footnote:h,buttonText:b,callToActionClicked:m})=>{const x=(0,a.jh)(),v=x&&d[x]||"canon",g=x&&c[x]||"mesto",E=x&&u[x]||"finale";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.D,{as:"h1",variant:v,semanticColor:"textBase",className:s.Z.title,children:e}),(0,r.jsx)(n.D,{as:"h2",variant:g,semanticColor:"textSubdued",className:s.Z.subtitle,children:t}),i,m&&(0,r.jsx)(l.D,{className:s.Z.button,colorSet:"invertedLight",onClick:m,"data-testid":o.xd,children:b}),h&&(0,r.jsx)(n.D,{as:"p",variant:E,semanticColor:"textSubdued",className:s.Z.note,children:h})]})}},43905:(e,t,i)=>{i.d(t,{H:()=>p});var n=i(84875),l=i.n(n),a=i(28669),o=i(52861),s=i(63165),r=i(42986);const d="NTT5CathoDEMjrmgfv9y",c="WmmNhmwHDNvDxInfukYO";var u=i(4637);const h=e=>(0,u.jsx)("div",{className:d,children:(0,u.jsx)("div",{className:c,children:(0,u.jsx)("svg",{width:e.iconSize,height:e.iconSize,fill:"currentColor",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{d:"M33 31.998v-23h-2v23H8v2h23v23h2v-23h23v-2z"})})})});var b=i(9797),m=i(95610),x=i(6422);const v={name:"",username:"",image_url:null,hash:""},g={[r.Uo.MEDIUM]:164,[r.Uo.LARGE]:164,[r.Uo.XLARGE]:270},E=(e,t)=>(0,u.jsx)(o.q,{label:a.ag.get("web-player.blend.invite.button-title"),images:[],width:e,userIconSize:t,customPlaceholder:(0,u.jsx)(h,{iconSize:t}),piled:!0}),p=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=!!e.members?.length,d=n&&e.members?.[0]||e.recipient||v,c=n&&e.recipient||null,h=(0,r.jh)(),p=h&&g[h]||128,j=Math.round(.475*p);return(0,u.jsxs)("div",{className:l()(x.Z.container,x.Z.TwoUsers),"data-testid":m.xS,ref:i,children:[(0,u.jsx)(s.$,{children:a.ag.get("blend.invite.page-title")}),(0,u.jsxs)("div",{className:x.Z.facepile,children:[(0,u.jsx)(o.q,{label:d.name,images:[{url:d.image_url??"",width:p,height:p}],width:p,userIconSize:j}),c?(0,u.jsx)(o.q,{label:c.name,images:[{url:c.image_url??"",width:p,height:p}],width:p,userIconSize:j,piled:!0}):E(p,j)]}),(0,u.jsx)(b.l,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,buttonText:e.button_text,callToActionClicked:t})]})}},95610:(e,t,i)=>{i.d(t,{Eh:()=>o,ab:()=>a,e0:()=>n,xS:()=>l,xd:()=>s});const n="blend-deleted-container",l="blend-two-user-container",a="blend-multi-user-container",o="blend-full-container",s="blend-cta-button"},37191:(e,t,i)=>{i.d(t,{Z:()=>n});const n=()=>{const e=window.location.href;return window.location.href=`https://accounts.spotify.com/login?continue=${encodeURIComponent(e)}`,null}},91893:(e,t,i)=>{i.d(t,{Ag:()=>s,V3:()=>l,nW:()=>o,oN:()=>a});var n=i(9996);let l;!function(e){e.PENDING_INVITATION="PENDING_INVITATION",e.READY_TO_JOIN_EMPTY_BLEND="READY_TO_JOIN_EMPTY_BLEND",e.READY_TO_JOIN_ALREADY_CREATED_BLEND="READY_TO_JOIN_ALREADY_CREATED_BLEND",e.MAX_MEMBERS="MAX_MEMBERS",e.ALREADY_JOINED="ALREADY_JOINED",e.DELETED="DELETED"}(l||(l={}));const a=(e,t)=>e.build().withHost(n.cM).withPath(`/v3/view-invitation/${encodeURIComponent(t)}`).withEndpointIdentifier("v3/view-invitation/{invitationId}").withLocale(e.locale).send(),o=(e,t)=>e.build().withHost(n.cM).withMethod("PUT").withPath(`/v2/join/${encodeURIComponent(t)}`).withEndpointIdentifier("join/{invitationId}").send(),s=e=>e.build().withHost(n.cM).withMethod("POST").withPath("/v1/generate").withEndpointIdentifier("v1/generate").send()},30907:(e,t,i)=>{i.d(t,{j:()=>a});var n=i(10547),l=i(48804);const a=()=>(0,l.D)({[n.U.SMALL]:536,[n.U.MEDIUM]:792,[n.U.LARGE]:1048,[n.U.XLARGE]:1688})},87584:(e,t,i)=>{i.d(t,{i:()=>u});var n=i(59496),l=i(77646),a=i(28669),o=i(32961),s=i(32546),r=i(80837),d=i(59295),c=i(91893);function u(){const{user:e}=(0,l.v9)(d.Gg),t=(0,r.k)(),i=(0,n.useCallback)((async()=>{const t=await(0,c.Ag)(o.b.getInstance()),i=t.body?.invite;if(!i)throw new Error("unable to generate invite link");return e?.display_name?a.ag.get("blend.invite.body-with-name",e.display_name,t.body?.invite):a.ag.get("blend.invite.body-without-name",t.body?.invite)}),[e?.display_name]);return async()=>{try{await(0,s.v)(i()),t(a.ag.get("feedback.link-copied"))}catch{t(a.ag.get("error.generic"))}}}},44365:(e,t,i)=>{i.r(t),i.d(t,{default:()=>E});var n=i(59496),l=i(77646),a=i(28669),o=i(63165),s=i(59295),r=i(42986),d=i(13358),c=i(70812),u=i(91893),h=i(30907),b=i(87584),m=i(43905),x=i(37191),v=i(4637);const g={page_type:u.V3.PENDING_INVITATION,get title(){return a.ag.get("web-player.blend.group-invite.header")},get subtitle(){return a.ag.get("web-player.blend.duo-invite.description")},get button_text(){return a.ag.get("web-player.blend.invite.button-title")},footnote:null,members:[],recipient:null,members_title:null,playlist_uri:null},E=()=>{const e=(0,b.i)(),{ref:t,breakpoint:i}=(0,h.j)(),{user:u}=(0,l.v9)(s.Gg),E=u?.uri?(0,d.C)(u?.uri):"",p=(e=>({...g,members:[e],footnote:a.ag.get("web-player.blend.group-invite.warning")}))({name:u?.display_name||"",username:E,image_url:(0,c.X)(u?.images)?.url||null,hash:""});return u?(0,v.jsxs)(n.Suspense,{fallback:null,children:[(0,v.jsx)(o.$,{children:a.ag.get("web-player.blend.invite.page-title")}),(0,v.jsx)(r.ZU.Provider,{value:i,children:(0,v.jsx)(m.H,{invitation:p,callToActionClicked:e,breakpointEltRef:t})})]}):(0,v.jsx)(x.Z,{})}},59228:(e,t,i)=>{i.r(t),i.d(t,{default:()=>q});var n=i(59496),l=i(77646),a=i(92053),o=i(59295),s=i(88585),r=i.n(s),d=i(92890),c=i(45947),u=i(28669),h=i(63794),b=i(85400),m=i(42986),x=i(27521),v=i(91893),g=i(30907),E=i(87584),p=i(32961),j=i(80837);var w=i(48745),f=i(9797),_=i(95610),y=i(6422),A=i(4637);const I=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>(0,A.jsxs)("div",{className:y.Z.container,"data-testid":_.Eh,ref:i,children:[(0,A.jsx)(w.Z,{iconSize:64}),(0,A.jsx)(f.l,{title:e.title,subtitle:e.subtitle,buttonText:e.button_text,footnote:null,callToActionClicked:t})]});var N=i(63165),T=i(84875),D=i.n(T),R=i(652),k=i(52861),U=i(42551),L=i(58930),M=i(38696);const C="HKAYWYmxd5Ie8WSi0a4y",O="i52u_T3b50wraodIaORk",S="xakiNVMlUf6geF67FEgy",Z="IRhTesoeIiwswlly0Dvg",P="LNJzE17iskXWmfKAzY4U",Y="qzBr7X7cdLUhWdk0r8lL",V=({uri:e,imageUrl:t,name:i})=>(0,A.jsx)("li",{children:(0,A.jsx)(U._,{menu:(0,A.jsx)(L.I,{uri:e}),children:(0,A.jsx)(M.Link,{to:e,children:(0,A.jsxs)("div",{className:Z,children:[(0,A.jsx)(k.q,{images:[{url:t,width:null,height:null}],label:i,width:32,userIconSize:24,className:P}),(0,A.jsx)(R.D,{variant:"violaBold",className:"standalone-ellipsis-one-line",semanticColor:"textBase",children:i})]})})})}),B=({members:e,headingText:t,className:i})=>(0,A.jsxs)("div",{className:D()(C,i),children:[(0,A.jsx)("div",{children:(0,A.jsx)(R.D,{as:"h4",variant:"minuetBold",semanticColor:"textSubdued",className:O,children:t})}),(0,A.jsx)("ul",{className:S,children:e&&e.map((e=>(0,A.jsx)(V,{imageUrl:e.image_url||"",name:e.name,uri:r().profileURI(e.username).toURI()},e.username)))}),(0,A.jsx)("div",{className:Y})]}),G=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=e.members||[],l=(0,A.jsx)("div",{className:y.Z.userListContainer,"data-testid":_.ab,children:(0,A.jsx)(B,{className:y.Z.userList,headingText:e.members_title,members:n})});return(0,A.jsxs)("div",{className:y.Z.container,ref:i,children:[(0,A.jsx)(N.$,{children:u.ag.get("blend.join.title")}),(0,A.jsx)(f.l,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,body:l,buttonText:e.button_text,callToActionClicked:t})]})};var z=i(43905);const X=({invitationId:e})=>{const t=(0,a.s0)(),i=(0,c.W6)(b.c$),{data:l,error:o,loading:s}=(0,h.J)(v.oN,[e]),w=(0,E.i)(),N=function(e){const t=(0,j.k)(),i=(0,a.s0)();return async()=>{try{const t=await(0,v.nW)(p.b.getInstance(),e),n=r().from(t?.body.playlist_uri).toURLPath(!0);if(!n)throw new Error("unable to join");i(n,{replace:!0})}catch{t(u.ag.get("error.request-playlist-failure"))}}}(e),{ref:T,breakpoint:D}=(0,g.j)();(0,n.useEffect)((()=>{if(l?.body.page_type===v.V3.ALREADY_JOINED){const e=r().from(l?.body.playlist_uri)?.toURLPath(!0);e&&t(e,{replace:!0})}}),[l?.body.page_type,l?.body.playlist_uri,t]);const R=null===l||!l.body;if(R||s||o)return(0,A.jsx)(x.h,{timeoutInMs:1e3,hasError:!!o||!s&&R,errorMessage:u.ag.get("error.generic")});const k=l?.body.members?.length||0,U=i===b.rS.TWO_USER;switch(l?.body.page_type){case v.V3.DELETED:return(0,A.jsx)(m.ZU.Provider,{value:D,children:(0,A.jsxs)("div",{className:y.Z.container,ref:T,"data-testid":_.e0,children:[(0,A.jsx)(d.F,{iconSize:64}),(0,A.jsx)(f.l,{title:l.body.title,subtitle:l.body.subtitle,buttonText:l.body.button_text,footnote:l.body.footnote,callToActionClicked:w})]})});case v.V3.ALREADY_JOINED:return(0,A.jsx)(x.h,{hasError:!1,errorMessage:u.ag.get("error.request-playlist-failure")});case v.V3.READY_TO_JOIN_EMPTY_BLEND:return(0,A.jsx)(m.ZU.Provider,{value:D,children:(0,A.jsx)(z.H,{invitation:l.body,breakpointEltRef:T,callToActionClicked:N})});case v.V3.READY_TO_JOIN_ALREADY_CREATED_BLEND:return U&&k>=2?(0,A.jsx)(m.ZU.Provider,{value:D,children:(0,A.jsx)(I,{invitation:{...l.body,title:u.ag.get("blend.link-invialid.header"),subtitle:u.ag.get("blend.link-invalid.subtitle"),button_text:u.ag.get("blend.invite.button-title")},callToActionClicked:w,breakpointEltRef:T})}):(0,A.jsx)(m.ZU.Provider,{value:D,children:(0,A.jsx)(G,{invitation:l.body,callToActionClicked:N,breakpointEltRef:T})});case v.V3.MAX_MEMBERS:return(0,A.jsx)(m.ZU.Provider,{value:D,children:(0,A.jsx)(I,{invitation:l.body,callToActionClicked:w,breakpointEltRef:T})});case v.V3.PENDING_INVITATION:return(0,A.jsx)(m.ZU.Provider,{value:D,children:(0,A.jsx)(z.H,{invitation:l.body,callToActionClicked:w,breakpointEltRef:T})});default:return(0,A.jsx)(x.h,{timeoutInMs:1e3,hasError:!0,errorMessage:u.ag.get("error.generic")})}};var J=i(37191);const W=({invitationId:e})=>{const{user:t}=(0,l.v9)(o.Gg);return t?(0,A.jsx)(n.Suspense,{fallback:null,children:(0,A.jsx)(X,{invitationId:e})}):(0,A.jsx)(J.Z,{})},q=(0,n.memo)((()=>{const{invitationId:e=""}=(0,a.UO)();return(0,A.jsx)(W,{invitationId:e})}))},6422:(e,t,i)=>{i.d(t,{Z:()=>n});const n={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",container:"yMoj4jXSudxZ6BkKxV2E",TwoUsers:"IDgUCqAbkRah6OFywv1q",subtitle:"qmKxO5qV4XmVYfpFpaDA",facepile:"nWMdWl40O8K7HQT8Tagc",title:"csRAeNipsu1camQTMiIU",button:"nxFBywAeAI8Zk2fav3Yj",userList:"lxPLQIPb1VSV3VL18Ke3",userListContainer:"BzMKhmywgyIt6IUjcTGW",note:"DSdKNusLgsMX_iicYCU2"}}}]);
//# sourceMappingURL=xpui-routes-blend.js.map