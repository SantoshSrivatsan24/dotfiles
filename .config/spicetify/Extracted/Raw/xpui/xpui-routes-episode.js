"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{48374:(e,t,s)=>{s.d(t,{o:()=>n});var a=s(45947),i=s(85400);function n(){return{version:(0,a.W6)(i.GE)?2:1}}},8:(e,t,s)=>{s.d(t,{p:()=>u,q:()=>l.q});var a=s(59496),i=s(77646),n=s(17578),r=s(16078),o=s(42856),l=s(46914),c=s(4637);const d=a.memo((function({uri:e,size:t=l.q.md,className:s,onClick:d,showUpsell:u}){const[p,m]=(0,n.Z)(e),x=(0,i.I0)(),h=(0,o.o)(),g=(0,a.useCallback)((()=>{h({targetUri:e,intent:p?"remove-from-library":"add-to-library",type:"click"}),m(!p),x(p?(0,r.SS)():(0,r.kK)())}),[h,e,p,m,x]);return(0,c.jsx)(l.o,{className:s,isFollowing:p,onFollow:g,onClick:d,uri:e,size:t,showUpsell:u})})),u=a.memo((function(e){return(0,c.jsx)(d,{...e})}))},77943:(e,t,s)=>{s.r(t),s.d(t,{default:()=>At});var a=s(59496),i=s(92053),n=s(45947),r=s(21966),o=s(30083),l=s(55964),c=s(28669),d=s(63165),u=s(58513),p=s(27521),m=s(85762),x=s(48374),h=s(15123),g=s(4637);const y=(0,a.lazy)((()=>s.e(9966).then(s.bind(s,94924))));function j(e){const t=(0,h.m)(),s=(0,x.o)();return t?(0,g.jsx)(a.Suspense,{fallback:!0,children:(0,g.jsx)(y,{reason:"Episode page",...s,...e})}):null}const b="dpN5ViPOceUWNB5EQPHN",k="vBcxPq3E2okwgXOkVPEM",C="HCCBXwdFvq6omWW2hR0N",P="bJOPO5Zo7dpjSVDwEpSw",f="TXdDDpokVTyJzDEDWHHf",v="HaSbtEVJnxBsaJ5SRi0M",T="YldGldlfaI9myEGXQf9g",I="qJHVIpJn1vLPWsAKfTEZ",E="wSIzjkVlr0Zdy7di2vRm",S="hYS_K1NATGyWt6tCSRqQ",D="hVVaM4pF9arpQ8Nvn2a1",U="zf0Eac1LugsHUacz74Zf",N="TnNaqxbaI0hzhBQZ7wE0",L="zSw1lG1TNe_xm6KTqtCv",M="MlEQDkXnjdKKJueJ9kkB",w="jg0xlyD1yjh0DPNG6eOg",A="QiHXpFb4dLZNOFe5gpp3";var R=s(652),B=s(63433),F=s(37796),z=s(12075),O=s(85400),_=s(78489);const H=({cardHeaderText:e,cardBodyText:t,buttonText:s,buttonTarget:a})=>(0,n.W6)(O.vp)?(0,g.jsxs)("div",{className:T,children:[(0,g.jsxs)("div",{className:I,children:[(0,g.jsx)(R.D,{variant:"balladBold",semanticColor:"textBase",children:e}),(0,g.jsx)(R.D,{semanticColor:"textBase",children:t})]}),(0,g.jsx)(z.D,{buttonSize:"sm",colorSet:"invertedLight",href:(0,l.EC)(a).toURLPath(!0),component:_.Z,children:s})]}):null,W=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:s,hasDescription:i,htmlDescription:n,onExpanded:r,onTimeStampClick:o,playability:l,showHeader:d=!0,spec:u})=>{const p=(0,F.$P)(),m=(i||t)&&d,x=(0,a.useCallback)((e=>{const t=u.readMoreButtonFactory();p.logInteraction(e?t.hitUiReveal():t.hitUiHide()),r?.()}),[u,p,r]);return(0,g.jsxs)(g.Fragment,{children:[m&&(0,g.jsx)(R.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:C,children:c.ag.get("episode.description-title")}),t&&(0,g.jsx)(H,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),i&&(0,g.jsx)(B.o,{className:k,onTimeStampClick:o,maxLines:4,onExpanded:x,content:(s||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:l.playable})]})};var $,Z=s(84875),q=s.n(Z),K=s(34745),Y=s(77247),V=s(44045),X=s(32716),G=s(72383),Q=s(55019);!function(e){e.DESCRIPTION="description",e.TRANSCRIPT="transcript"}($||($={}));const J=a.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:s,spec:i}){const n=(0,F.$P)(),[r,o]=(0,a.useState)($.DESCRIPTION),{scrollNodeRef:l}=a.useContext(Q.VX),{ref:d,inView:u}=(0,K.YD)({threshold:[1],root:l.current,rootMargin:`-${G.K1+1}px 100000px 0px 100000px`}),p=(0,a.useRef)(null),m=(0,a.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,a.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const s=e-G.K1;t.scrollTop>s&&t.scrollTo({top:s})}),[l,r]),(0,g.jsx)(Y.l,{list:(0,g.jsxs)(V.F,{className:q()(M,{[w]:!u}),ref:m,children:[(0,g.jsx)(X.c,{label:c.ag.get("web-player.episode.description"),sentenceCase:!0,active:r===$.DESCRIPTION,onClick:()=>{const e=i.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o($.DESCRIPTION)},className:q()(A,{[E]:r===$.DESCRIPTION})}),(0,g.jsx)(X.c,{label:c.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===$.TRANSCRIPT,onClick:()=>{const e=i.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o($.TRANSCRIPT)},className:q()(A,{[E]:r===$.TRANSCRIPT})})]}),children:null===e||r===$.DESCRIPTION?t:s})}));var ee=s(15282),te=s(35532);const se=(0,a.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:s}){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:D,children:(0,g.jsx)(R.D,{variant:"viola",semanticColor:"textBase",children:c.ag.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,a)=>{const i=`transcript-section-${a}`;return(0,g.jsxs)("div",{className:S,children:[(0,g.jsx)("button",{className:U,onClick:()=>{t(e.startMs,i)},children:(0,g.jsx)(ee.D,{id:i,targetURI:(0,l.EC)(s),fadeOut:!0,children:(0,g.jsx)(R.D,{variant:"finaleBold",semanticColor:"textSubdued",className:N,children:(0,te.m)(e.startMs)})})}),e.content.map(((e,t)=>(0,g.jsx)(R.D,{variant:"viola",semanticColor:"textBase",className:L,dir:"auto",children:e},`transcript-text-${t}`)))]},i)}))]})}));var ae=s(88990),ie=s(96955),ne=s(36428),re=s(7741),oe=s(97770),le=s(17343),ce=s(92030),de=s(96640),ue=s(89568),pe=s(7119),me=s(77634);const xe="OYehkMWcGJRKPkByp46K",he="uc1bXkrZqrCz0CMK4lBb",ge="qZeibBbA3SVClzEueYND",ye=({episodeUri:e,index:t,duration:s,start:i,stop:n,name:r,uri:o,artists:l,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:x}=(0,ue.k)({episodeUri:e,start:i,stop:n}),h=(0,a.useCallback)(((e,t)=>{x(t)}),[x]),{spec:y}=(0,F.fU)(oe.createDesktopTrackListRowEventFactory,{data:{position:t,reason:"",uri:o}});return(0,g.jsx)(me.ZP,{value:"row",index:t,children:(0,g.jsx)(pe.xV,{trigger:"right-click",action:"open",menu:(0,g.jsx)(le.$,{uri:o}),children:(0,g.jsxs)(de.c,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:h,isActive:p,isPlayable:u,spec:y,children:[(0,g.jsxs)(ce.vZ,{ariaColIndex:0,children:[(0,g.jsx)(ce.Du,{uri:o,playAriaLabel:c.ag.get("tracklist.a11y.play",r,l?.[0].name),onClick:h,isPlaying:m,isActive:p,spec:y,children:(0,g.jsx)(ce.km,{children:(0,g.jsx)("img",{className:he,src:d.image,alt:d.name})})}),(0,g.jsxs)(ce.vm,{children:[(0,g.jsx)(ce.Wh,{titleText:r,children:r}),(0,g.jsx)(ce.K9,{children:(0,g.jsx)(ce.T6,{artists:l,spec:y})})]})]}),(0,g.jsx)(ce.UA,{ariaColIndex:1,children:(0,g.jsx)(ce.BM,{uri:d.uri,name:d.name,spec:y,children:d.name})}),(0,g.jsxs)(ce.mU,{ariaColIndex:2,children:[(0,g.jsx)(ce.qS,{uri:o,spec:y}),(0,g.jsx)(ce.A$,{duration:s}),(0,g.jsx)(ce.Zv,{spec:y,menu:(0,g.jsx)(le.$,{uri:o,artists:l}),label:c.ag.get("more.label.track",r,l?.[0].name)})]})]})})})};function je(e,t,s){return e.reduce(((e,a,i)=>((i>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===a.type?e.push(function(e,t,s){return{type:"MUSIC",index:t,uri:s.uri,episodeUri:e,start:s.start,stop:s.stop,duration:s.duration,name:s.track.name,artists:s.track.artists,album:s.track.album,playable:s.track.playable}}(s,i,a)):"TALK"===a.type&&e.push(function(e,t,s){return{type:"TALK",index:t,uri:e,title:s.title,subtitle:s.subtitle,start:s.start,stop:s.stop,duration:s.duration,showUri:s.show.uri,showName:s.show.name}}(s,i,a)),e)),[])}const be=({uri:e,segmentCount:t})=>{const s=(0,ne.G)(),i=(0,a.useCallback)((async(a,i)=>{const n=Math.ceil(a/2);try{return{items:je(await s.getSegments(e,n,i),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,s,e]),n=(0,a.useCallback)((t=>{switch(t.type){case"SPACER":return(0,g.jsx)("div",{className:ge},t.id);case"MUSIC":return(0,g.jsx)(ye,{...t},`${e}-${t.index}`);case"TALK":return(0,g.jsx)(ae.t,{...t},`${e}-${t.index}`);default:return(0,re.U)(t)}}),[e]),r=c.ag.get("music_and_talk.in_this_episode");return(0,g.jsxs)("div",{children:[(0,g.jsx)(R.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:xe,children:r}),(0,g.jsx)(ie.Pv,{ariaLabel:r,hasHeaderRow:!0,rowPlaceholder:ie.hU,columns:[ie.QD.TITLE,ie.QD.ALBUM_OR_SHOW,ie.QD.DURATION],renderRow:n,fetchTracks:i,resolveUri:e=>"MUSIC"===e.type?e.uri:"",limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})};var ke=s(77472);const Ce=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:s,hasDescription:i,hasMusicAndTalkSegements:n,htmlDescription:r,onExpanded:o,onDescriptionTimestampClick:l,onTranscriptTimestampClick:d,playability:u,segmentCount:p,showUrl:x,transcript:h,transcriptEnabled:y,uri:b,spec:k})=>{const C=(0,F.$P)(),f=(0,a.useMemo)((()=>k.descriptionSectionFactory()),[k]),v=(0,a.useMemo)((()=>f.trackListFactory()),[f]),[T,I]=(0,a.useState)(null),E=(0,a.useCallback)((async e=>{const t=await(0,ke.l)(e);I(t)}),[]);(0,a.useEffect)((()=>{h&&h.length>0&&E(h[0].cdnUrl)}),[E,h]);const S=a=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(W,{hasDescription:i,contentInformation:t,onTimeStampClick:l,onExpanded:o,description:s,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:u,showHeader:a,spec:f}),n&&(0,g.jsx)(F.Nh,{spec:v,children:(0,g.jsx)(be,{segmentCount:p,uri:b})}),x&&(0,g.jsx)(m.P,{buttonSize:"sm",className:P,href:x,component:_.Z,onClick:()=>{C.logInteraction(f.allEpisodesLinkFactory().hitUiNavigate({destination:x}))},children:c.ag.get("episode.see_all_episodes")}),(0,g.jsx)(j,{uri:b})]});return(0,g.jsx)(g.Fragment,{children:y&&h&&h?.length>0?(0,g.jsx)(J,{transcriptSections:T,descriptionContent:S(!1),transcriptContent:(0,g.jsx)(se,{transcriptSections:T||[],onTimeStampClick:d,episodeUri:b}),spec:k}):S(!0)})};var Pe=s(3361),fe=s(76290),ve=s(98912),Te=s(70460);const Ie="activation-trigger-mme",Ee=({episodeUri:e,showUri:t,isLocked:s,isPlaying:a,isPlayDisabled:i,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o})=>{const c=(0,Te.E)();if((0,fe.g)())return(0,g.jsx)(ve.JM,{size:ve.qE.lg,onClick:o,isPlaying:a,disabled:i,locked:s,ariaPlayLabel:n,ariaPauseLabel:r});const d=(0,g.jsx)(Pe.l,{showUri:t,enabled:s,renderInline:!1,children:(0,g.jsx)(ve.JM,{size:ve.qE.lg,onClick:o,isPlaying:a,disabled:i,locked:s,ariaPlayLabel:n,ariaPauseLabel:r})});return c?(0,g.jsx)(ee.D,{id:Ie,targetURI:(0,l.EC)(e),fadeOut:!0,children:d}):d};var Se=s(88585),De=s.n(Se),Ue=s(77110);const Ne="o6AdXY67I_0xmTg8LBCI",Le="MMZAjWZzcPpNIE06SNuf",Me="Ccgbgvk9PwclKl5rA6Zj",we="NHVXJRN6IZANogQjMWei",Ae="orBUEK6aY0SZVOnrDerw",Re="ym1d5PDeTaJLIK0SspBF",Be="Hko6tpIRefr4NKiTEemO",Fe="ptUwXq9IK8IQAOE2UiDA",ze="mpyCCCudeQ3uBmgrSAcA",Oe=({cardHeaderText:e,cardBodyText:t,buttonText:s,buttonTarget:a})=>(0,n.W6)(O.vp)?(0,g.jsxs)("div",{className:Be,children:[(0,g.jsxs)("div",{className:Fe,children:[(0,g.jsx)(R.D,{variant:"balladBold",semanticColor:"textBase",children:e}),(0,g.jsx)(R.D,{semanticColor:"textBase",children:t})]}),(0,g.jsx)(z.D,{buttonSize:"sm",colorSet:"invertedLight",href:De().from(a).toURLPath(!0),component:_.Z,children:s})]}):null,_e=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:s,hasDescription:a,htmlDescription:i,onExpanded:n,onTimeStampClick:r,playability:o,showHeader:l=!0})=>{const d=(a||t)&&l;return(0,g.jsxs)(g.Fragment,{children:[d&&(0,g.jsx)(R.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Me,children:c.ag.get("episode.description-title")}),t&&(0,g.jsx)(Oe,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),a&&(0,g.jsx)(B.o,{className:Le,onTimeStampClick:r,maxLines:4,onExpanded:n,content:(s||"").trim(),htmlContent:e&&i?i:void 0,enableTimestamps:o.playable})]})},He=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:s,hasDescription:a,htmlDescription:i,onExpanded:n,onTimeStampClick:r,playability:o,showUrl:l,uri:d,seeAllButtonClick:u})=>{return p=!0,(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(_e,{hasDescription:a,contentInformation:t,onTimeStampClick:r,onExpanded:n,description:s,areHTMLDescriptionsEnabled:e,htmlDescription:i,playability:o,showHeader:p}),l&&(0,g.jsx)(m.P,{onClick:u,buttonSize:"sm",className:we,href:l,component:_.Z,children:c.ag.get("episode.see_all_episodes")}),(0,g.jsx)(j,{uri:d})]});var p};var We=s(36939);const $e="activation-trigger-mme",Ze=({episodeUri:e,showUri:t,isLocked:s,isPlaying:a,isPlayDisabled:i,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o})=>{const c=(0,Te.E)(),d=(0,g.jsx)(Pe.l,{showUri:t,enabled:s,renderInline:!1,children:(0,g.jsx)(We.f,{size:"lg",onClick:o,isPlaying:a,disabled:i,locked:s,ariaPlayLabel:n,ariaPauseLabel:r})});return c?(0,g.jsx)(ee.D,{id:$e,targetURI:(0,l.EC)(e),fadeOut:!0,children:d}):d};var qe=s(42856),Ke=s(92758),Ye=s(89632),Ve=s(67780),Xe=s(18169),Ge=s(4147),Qe=s(10687),Je=s(80323),et=s(95598),tt=s(77646),st=s(18513),at=s(49956),it=s(8),nt=s(72053),rt=s(70695),ot=s(76075),lt=s(74058),ct=s(8285),dt=s(29928),ut=s(89647),pt=s(90555),mt=s(28824);const xt=({podcastShort:e,onPlayEpisode:t,isPlaying:s,isActive:i,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,onDownloadClick:d,onContextMenuClick:u})=>{const{uri:p,playedState:m,contentRating:x,playability:h}=e,y=(0,tt.I0)(),[j]=(0,ut.z)(1e4,(e=>e?.item?.uri===p)),b=(0,Je.Y)((e=>e?.duration)),{badges:k,hasBadges:C}=(0,mt.r)({contentRating:x?.label}),P=(0,a.useCallback)((e=>{!h.playable&&k.nineteen&&(e.stopPropagation(),y((0,st.RM)(p||"")))}),[p,h.playable,k.nineteen,y]),f=!l&&!e.playability.playable,v=c.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),T=c.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),I=e.podcast?.uri;return(0,g.jsxs)(at.o,{backgroundColor:o,children:[(0,g.jsxs)("div",{className:ze,children:[C&&(0,g.jsxs)(ot.g,{children:[k.nineteen&&(0,g.jsx)(dt.X,{className:Ae,size:16}),k.explicit?(0,g.jsx)(ct.N,{}):null]}),(0,g.jsx)(at.F,{children:(0,g.jsx)(pt.E,{size:pt.$.LARGE,fullyPlayed:n,durationMs:i&&b?b:e.duration.milliseconds,releaseDate:ft(e.releaseDate?.isoString),resumePositionMs:m.playPositionMilliseconds,isPlaying:s,position:i&&j||void 0})})]}),(0,g.jsxs)(at.F,{children:[(0,g.jsx)("div",{onClick:P,children:(0,g.jsx)(Ze,{episodeUri:e.uri,showUri:I,isLocked:l,onClick:()=>{t(m.playPositionMilliseconds,!1)},isPlaying:s,isPlayDisabled:f,playButtonPlayLabel:v,playButtonPauseLabel:T})}),!l&&(0,g.jsx)(it.p,{onClick:d,uri:e.uri}),(0,g.jsx)(lt.y,{onShow:u,menu:(0,g.jsx)(rt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:I,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r,userCreated:e.userCreated}),children:(0,g.jsx)(nt.z,{label:c.ag.get("more.label.context",e.name)})})]})]})};var ht=s(61975),gt=s(77080),yt=s(95995),jt=s(38696),bt=s(42551),kt=s(71834);const Ct=({podcastShort:e,isFullyPlayed:t,setIsFullyPlayed:s,backgroundColor:a,spec:i})=>{const{uri:n,name:r,sharingInfo:o,playedState:l,episodeType:d,releaseDate:u,userCreated:p}=e,m=(0,F.$P)(),x=function(e,t,s,a,i){const n=t===et.Wf.Episode;return(0,kt.G3)(e,a,s,i)?(0,g.jsx)(kt.Fg,{isMusicAndTalk:n}):n?c.ag.get("type.showEpisode"):c.ag.get("type.podcastEpisode")}(n,d||et.Wf.Unknown,l.playPositionMilliseconds,ft(u?.isoString),l.state===et.sY.Completed),h=e.podcast?.uri;return(0,g.jsxs)(ht.gF,{backgroundColor:a,children:[(0,g.jsx)(gt.W,{children:(0,g.jsx)(yt.i,{text:e.name,dragUri:n,dragLabel:e.name})}),(0,g.jsx)("div",{className:Re,children:p?.userUri&&(0,g.jsx)(bt._,{menu:(0,g.jsx)(rt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:h,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:s,userCreated:p}),children:(0,g.jsx)(ht.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:ht.Kc.ROUNDED_CORNERS})})}),(0,g.jsxs)(ht.sP,{children:[(0,g.jsx)(ht.dy,{small:!0,uppercase:!0,children:x}),p?.userUri&&(0,g.jsx)(bt._,{menu:(0,g.jsx)(rt.v,{uri:n,sharingInfo:o,showUri:h,contextUri:n,isPlayed:t,onMarkAsPlayed:s,userCreated:p}),children:(0,g.jsx)(ht.xd,{dragUri:n,dragLabel:r,children:r})}),p?.userUri&&(0,g.jsx)(bt._,{menu:(0,g.jsx)(rt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:h,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:s,userCreated:p}),children:(0,g.jsx)(jt.default,{onClick:()=>{const e=i.hitUiNavigate({destination:p?.userUri??""});m.logInteraction(e)},to:p.userUri,children:(0,g.jsx)(ht.dy,{large:!0,bold:!0,children:(0,g.jsx)("span",{"data-testid":"showTitle",children:p?.displayName})})})})]})]})},Pt=({podcastShort:e})=>{const{uri:t,episodeType:s,description:i,htmlDescription:r,podcastSubscription:o,segmentsCount:l,podcast:p,contentInformation:m,playedState:x,coverArt:h,userCreated:y}=e,{spec:j}=(0,F.fU)(Ue.createDesktopPodcastShortEventFactory,{data:{uri:t}}),b=a.useMemo((()=>j.userProfileLinkFactory({uri:t})),[j,t]),k=a.useMemo((()=>j.actionBarFactory()),[j]),[C,P]=(0,a.useState)(x.state===et.sY.Completed),f=(0,Xe.g)(),v=(0,qe.o)(),T=(0,n.W6)(O.Cz),I=void 0!==l&&l>0,E=(0,fe.g)(),{triggerPlay:S,togglePlay:D,isActive:U}=(0,Ge.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:N,isActive:L}=(0,Qe.$o)(t),M=h[0].url,w=(0,Ye.Zj)(M||null),A=(0,Je.Y)((e=>e?.isPaused??void 0)),R=(0,Te.E)(),B=o?.isPaywalled&&!o.isUserSubscribed,z=(0,Ke.s)(e,p),_=(0,F.$P)(),H=(0,a.useCallback)(((e,a=!0,i)=>{const n=()=>{A?f.resume():f.pause()};if(B)return;let r="play";if(!N||0!==e&&a||(r="pause"),v({intent:r,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),s===et.Wf.Episode&&R)u.y.set((()=>({triggerId:i||$e,triggerAction:null})));else if(U&&!a)if(E)n();else{const e=(0,Ve.aK)({isPlaying:N,isActive:L,spec:j.actionBarFactory().playButtonFactory(),logger:_,uri:t});D({loggingParams:e})}else L?n():E?z({seekTo:e}):S({seekTo:e})}),[B,N,v,t,L,j,_,D,s,R,U,A,f,E,z,S]),W=(0,a.useCallback)((()=>{(0,Ve.qq)(k,_)}),[k,_]),$=(0,a.useCallback)(((e,s)=>{(0,Ve.l7)(s,k.downloadButtonFactory(),_,t)}),[_,t,k]),Z=(0,a.useCallback)((()=>{v({intent:"expand-description",type:"click"})}),[v]),q=(0,a.useCallback)((()=>{const e=y?.userUri??"",t=j.seeAllEpisodesButtonFactory({uri:e}).hitUiNavigate({destination:e});_.logInteraction(t)}),[y,_,j]);(0,a.useEffect)((()=>{const t=new URLSearchParams(location.search);if(t.has("t")){const s=t.get("t")||"0",a=1e3*parseInt(s,10);a<=e.duration.milliseconds&&H(a)}}),[H,e.duration.milliseconds]);const K=!!i||T&&!!r,Y=e.podcast?.uri,V=De().from(Y)?.toURLPath(!0);return(0,g.jsxs)("section",{"data-testid":"episode",className:Ne,children:[(0,g.jsx)(d.$,{children:c.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})}),(0,g.jsx)(Ct,{podcastShort:e,isFullyPlayed:C,setIsFullyPlayed:P,backgroundColor:w,spec:b}),(0,g.jsx)(xt,{podcastShort:e,onPlayEpisode:H,isPlaying:N,isActive:L||U,isFullyPlayed:C,setIsFullyPlayed:P,backgroundColor:w,isLocked:!!B,onContextMenuClick:W,onDownloadClick:$}),(0,g.jsx)("div",{className:"contentSpacing",children:(0,g.jsx)(He,{seeAllButtonClick:q,hasDescription:K,contentInformation:m,onTimeStampClick:H,onExpanded:Z,description:e.description,areHTMLDescriptionsEnabled:T,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:I,segmentCount:l,uri:e.uri,showUrl:V})})]})};function ft(e){return e?.replace(/T.*/,"")||""}var vt=s(62217),Tt=s(2970),It=s(27728),Et=s(47934),St=s(54655),Dt=s(13932),Ut=s(70745),Nt=s(43493);const Lt=({episode:e,onPlayEpisode:t,isPlaying:s,isActive:i,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:d})=>{const{uri:u,playedState:p,contentRating:m,playability:x}=e,h=(0,F.$P)(),y=(0,tt.I0)(),[j]=(0,ut.z)(1e4,(e=>e?.item?.uri===u)),b=(0,Je.Y)((e=>e?.duration)),{badges:k}=(0,mt.r)({contentRating:m?.label}),C=(0,a.useCallback)((e=>{!x.playable&&k.nineteen&&(e.stopPropagation(),y((0,st.RM)(u||"")))}),[u,x.playable,k.nineteen,y]),P=(0,a.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();h.logInteraction(e)}),[h,d]),v=(0,a.useCallback)(((e,t)=>{(0,Ve.l7)(t,d.downloadButtonFactory(),h,u)}),[h,d,u]),T=(0,a.useCallback)((e=>{const t=d.saveButtonFactory();h.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u}))}),[h,d,u]),I=!l&&!e.playability.playable,E=c.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),S=c.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),D=e.podcast?.uri;return(0,g.jsxs)(at.o,{backgroundColor:o,children:[(0,g.jsxs)(at.F,{children:[k.nineteen&&(0,g.jsx)(dt.X,{className:f,size:16}),(0,g.jsx)(pt.E,{size:pt.$.LARGE,fullyPlayed:n,durationMs:i&&b?b:e.duration.milliseconds,releaseDate:Rt(e.releaseDate?.isoString),resumePositionMs:p.playPositionMilliseconds,isPlaying:s,position:i&&j||void 0})]}),(0,g.jsxs)(at.F,{children:[(0,g.jsx)("div",{onClick:C,children:(0,g.jsx)(Ee,{episodeUri:e.uri,showUri:D,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:s,isPlayDisabled:I,playButtonPlayLabel:E,playButtonPauseLabel:S})}),!l&&(0,g.jsx)(it.p,{uri:e.uri,onClick:v}),(0,g.jsx)(Dt.w,{uri:e.uri,size:Nt.qE.md,onClick:T}),(0,g.jsx)(lt.y,{onShow:P,menu:(0,g.jsx)(Ut.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:D,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,g.jsx)(nt.z,{label:c.ag.get("more.label.context",e.name)})})]})]})};const Mt=({episode:e,isFullyPlayed:t,setIsFullyPlayed:s,backgroundColor:i,spec:n})=>{const{uri:r,name:o,sharingInfo:d,playedState:u,episodeType:p,releaseDate:m}=e,x=(0,F.$P)(),h=function(e,t,s,a,i){const n=t===et.Wf.Episode;return(0,kt.G3)(e,a,s,i)?(0,g.jsx)(kt.Fg,{isMusicAndTalk:n}):n?c.ag.get("type.showEpisode"):c.ag.get("type.podcastEpisode")}(r,p||et.Wf.Unknown,u.playPositionMilliseconds,Rt(m?.isoString),u.state===et.sY.Completed),y=e.podcast?.uri,j=function(e){const t=(0,l.EC)(e);return`/show/${(0,l.HB)(t?.id||"")}`}(y),b=(0,a.useCallback)((()=>{x.logInteraction(n.podcastLinkFactory().hitUiNavigate({destination:j}))}),[x,j,n]);return(0,g.jsxs)(ht.gF,{backgroundColor:i,children:[(0,g.jsx)(gt.W,{children:(0,g.jsx)(yt.i,{text:e.name,dragUri:r,dragLabel:e.name})}),(0,g.jsx)("div",{className:v,children:(0,g.jsx)(bt._,{menu:(0,g.jsx)(Ut.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:y,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:s}),children:(0,g.jsx)(ht.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:ht.Kc.ROUNDED_CORNERS})})}),(0,g.jsxs)(ht.sP,{children:[(0,g.jsx)(ht.dy,{small:!0,uppercase:!0,children:h}),(0,g.jsx)(bt._,{menu:(0,g.jsx)(Ut.k,{uri:r,sharingInfo:d,showUri:y,contextUri:r,isPlayed:t,onMarkAsPlayed:s}),children:(0,g.jsx)(ht.xd,{dragUri:r,dragLabel:o,children:(0,g.jsx)("span",{"data-testid":"episodeTitle",children:o})})}),(0,g.jsx)(bt._,{menu:(0,g.jsx)(Ut.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:y,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:s}),children:(0,g.jsx)(ht.dy,{large:!0,bold:!0,children:(0,g.jsx)(jt.default,{to:j,onClick:b,children:(0,g.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})})})]})]})},wt=({episode:e})=>{const{uri:t,episodeType:s,description:i,htmlDescription:o,podcastSubscription:p,segmentsCount:m,podcast:x,contentInformation:h,playedState:y,coverArt:j}=e,{spec:k,logger:C}=(0,F.fU)(r.createDesktopEpisodeEventFactory,{data:{uri:t}}),P=(0,a.useMemo)((()=>k.headerFactory()),[k]),f=(0,a.useMemo)((()=>k.actionBarFactory()),[k]),[v,T]=(0,a.useState)(y.state===et.sY.Completed),I=(0,Xe.g)(),E=(0,qe.o)(),S=(0,n.W6)(O.Cz),D=void 0!==m&&m>0,U=(0,n.W6)(O.WE,{loadingValue:!1}),N=(0,fe.g)(),{triggerPlay:L,togglePlay:M,isPlaying:w,isActive:A}=(0,Ge.n)({uri:t},{featureIdentifier:"episode"}),{isActive:R}=(0,Qe.$o)(t),B=j[0].url,z=(0,Ye.Zj)(B||null),_=(0,Je.Y)((e=>e?.isPaused??void 0)),H=(0,Te.E)(),W=p.isPaywalled&&!p.isUserSubscribed,$=R||A,Z=(0,Ke.s)(e,x),q=(0,a.useCallback)(((e,a,i,n)=>{const r=()=>{_?(n?.("resume"),I.resume()):(n?.("pause"),I.pause())};if(W)return;let o="play";if(!w||0!==e&&a||(o="pause"),E({intent:o,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),s===et.Wf.Episode&&H)u.y.set((()=>({triggerId:i||Ie,triggerAction:null})));else if(A&&!a)N?r():M({loggingParams:n?.()});else if(R&&!a)r();else{const t=n?.("play");N?Z({seekTo:e,loggingParams:t}):L({seekTo:e,loggingParams:t})}}),[W,w,E,t,s,H,R,A,N,_,I,M,Z,L]),K=(0,a.useCallback)((e=>{q(e,!1,void 0,(e=>{const s=k.actionBarFactory().playButtonFactory();let a;return a="pause"===e||w?s.hitPause({itemToBePaused:t}):"resume"===e||$?s.hitResume({itemToBeResumed:t}):s.hitPlay({itemToBePlayed:t}),C.logInteraction(a)}))}),[q,$,w,C,k,t]),Y=(0,a.useCallback)((e=>{q(e,!0,void 0,(()=>C.logInteraction(k.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[q,C,k,t]),V=(0,a.useCallback)(((e,s)=>{q(e,!0,s,(()=>C.logInteraction(k.transcriptSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[q,C,k,t]),X=(0,a.useCallback)((()=>{E({intent:"expand-description",type:"click"})}),[E]);(0,a.useEffect)((()=>{if(e&&!$){const t=new URLSearchParams(location.search);if(t.has("t")){const s=t.get("t")||"0",a=1e3*parseInt(s,10);a<=e.duration.milliseconds&&q(a,!0)}}}),[e,$]);const G=!!i||S&&!!o,Q=e.podcast?.uri,J=(0,l.EC)(Q)?.toURLPath(!0);return(0,g.jsxs)("section",{"data-testid":"episode",className:b,children:[(0,g.jsx)(d.$,{children:c.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})}),(0,g.jsx)(Mt,{episode:e,isFullyPlayed:v,setIsFullyPlayed:T,backgroundColor:z,spec:P}),(0,g.jsx)(Lt,{episode:e,onPlayEpisode:K,isPlaying:w,isActive:$,isFullyPlayed:v,setIsFullyPlayed:T,backgroundColor:z,isLocked:W,spec:f}),(0,g.jsx)("div",{className:"contentSpacing",children:(0,g.jsx)(Ce,{transcriptEnabled:U,transcript:e.transcript,hasDescription:G,contentInformation:h,onDescriptionTimestampClick:Y,onTranscriptTimestampClick:V,onExpanded:X,description:e.description,areHTMLDescriptionsEnabled:S,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:D,segmentCount:m,uri:e.uri,showUrl:J,spec:k})})]})},At=a.memo((function(){const{episodeId:e=""}=(0,i.UO)(),t=(0,l.YD)(e).toURI(),s=(0,n.W6)(O.Nf),r=(0,Tt.I)(t),d=(0,vt.V)("episode",r);return d?(0,g.jsx)(Et.InstrumentedRedirect,{to:d}):r?(0,It.Ey)(r)?(0,g.jsx)(Et.InstrumentedRedirect,{to:(0,l.EC)(r.book?.uri).toURLPath(!0)}):(0,It.Qj)(r)?s?(0,g.jsx)(a.Suspense,{fallback:null,children:(0,g.jsx)(St.C,{pageId:o.Wg.PODCAST_EPISODE,uri:t,children:(0,g.jsx)(Pt,{podcastShort:r})})}):(0,g.jsx)(p.h,{hasError:!0,errorMessage:c.ag.get("error.not_found.title.podcast")}):(0,g.jsx)(a.Suspense,{fallback:null,children:(0,g.jsx)(St.C,{pageId:o.Wg.PODCAST_EPISODE,uri:t,children:(0,g.jsx)(wt,{episode:r})})}):(0,g.jsx)(p.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.podcast")})}));function Rt(e){return e?.replace(/T.*/,"")||""}},90555:(e,t,s)=>{s.d(t,{E:()=>I,$:()=>T});var a=s(43806),i=s(59496);const n="wIA_5Ypq0rltNPeZQpM4",r="Swi6YtNEFCCVz8l4y75v",o="pklLPOhfigdytL9bPoth",l="sb24Y8kdMZInJ8aI8dXT";var c=s(4637);class d extends i.PureComponent{static defaultProps={current:0,max:1};render(){const{ariaValueText:e,max:t,current:s}=this.props,a=t&&s?100*Math.min(1,s/t):0,i={transform:`translateX(-${100-a}%)`},d=e||`${Math.round(a)}%`;return(0,c.jsxs)("div",{className:n,role:"progressbar",tabIndex:0,"aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":t,"aria-valuetext":d,children:[(0,c.jsx)("div",{className:r}),(0,c.jsx)("div",{className:o,children:(0,c.jsx)("div",{"data-testid":"progressBarFg",className:l,style:i})})]})}}const u=d,p="qfYkuLpETFW3axnfMntO",m="jOd7lbjiyc_kvRJaAbeL",x="_q93agegdE655O5zPz6l",h="z7Yl7CIT1AB0y91f_moh",g="iLIlkUcfIq56KncGtX7u",y="nV50yZ6BR_TIuWP3l7b1",j="qLjIx_SzBEpDRA_q7kxQ";var b=s(652),k=s(50138),C=s(28669),P=s(84875),f=s.n(P),v=s(14169);let T;!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(T||(T={}));const I=e=>{const{resumePositionMs:t=0,releaseDate:s,isPlaying:i,fullyPlayed:n,durationMs:r,size:o=T.SMALL,position:l=t}=e;return(0,c.jsxs)("div",{className:f()(p,{[m]:o===T.LARGE}),children:[s?(0,c.jsx)(b.D,{as:"p",variant:"mesto",className:x,children:(0,a.rL)((0,a.RX)(s))}):null,(()=>{if(n&&!i)return(0,c.jsxs)("div",{className:g,children:[(0,c.jsx)(b.D,{as:"p",variant:"mesto",className:h,children:C.ag.get("episode.played")}),(0,c.jsx)(k.N,{iconSize:16,className:j,"aria-hidden":"true"})]});if(l>0||i){const e=Math.ceil(Math.max(r-l,0));return(0,c.jsx)("div",{className:g,children:(0,c.jsx)(b.D,{as:"p",variant:"mesto",className:h,children:(0,c.jsx)(v.ng,{durationMs:e})})})}return(0,c.jsx)(b.D,{as:"p",variant:"mesto",className:x,children:(0,c.jsx)(v.nL,{durationMs:r})})})(),!n&&l>0||i?(0,c.jsx)("div",{className:y,children:(0,c.jsx)(u,{current:l,max:r,isEnabled:!1})}):null]})}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map