"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[59,396],{87581:(e,t,n)=>{n.d(t,{Q:()=>d});var r=n(67154),o=n.n(r),s=n(67294),i=n.n(s),a=n(94184),c=n.n(a);const p="_pMNGOs2KBLWGpGmunYI";function d(e){return i().createElement("section",o()({},e,{className:c()(p,e.className)}))}},14784:(e,t,n)=>{n.r(t),n.d(t,{ALL_EPISODE_SPONSORS_TESTID:()=>b,AllEpisodeSponsors:()=>E,allEpisodeSponsorsPath:()=>O.e,default:()=>v});var r=n(67154),o=n.n(r),s=n(67294),i=n.n(s),a=n(16528),c=n(46886),p=n(28975),d=n(87581),u=n(77186);var l=n(88396),f=n(99922),O=n(61737);const b="all-episode-sponsors";function E({EpisodeSponsorsWrapper:e=l.EpisodeSponsorsWrapper}){const{[p.hd]:t}=(0,a.UO)(),n=(0,u.P)(),r=(0,f.o)();return n.location.state?i().createElement(d.Q,{"data-testid":b},i().createElement(e,o()({},r,{numberOfSponsorsToDisplay:1/0,reason:"Episode page See All"}))):i().createElement(c.AP,{to:(0,p.lc)(t)})}const v=E},88396:(e,t,n)=>{n.r(t),n.d(t,{EPISODE_SPONSORS_SHELF_TESTID:()=>P,EpisodeSponsorsWrapper:()=>h,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>g,default:()=>w});var r=n(67154),o=n.n(r),s=n(59713),i=n.n(s),a=n(67294),c=n.n(a);const p=(0,a.lazy)((()=>Promise.all([n.e(814),n.e(258)]).then(n.bind(n,87258))));function d({fetchedEpisodeSponsorsData:e,fireTrackingEvent:t,numberOfSponsorsToDisplay:r,firedViewedEvents:s,version:i,reason:d,uri:u}){const{displayedEpisodeSponsorsData:l}=function({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:t}){return(0,a.useMemo)((()=>({displayedEpisodeSponsorsData:e.slice(0,t)})),[e,t])}({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:r}),f=(0,a.useMemo)((()=>l.map(((e,r)=>c().createElement(p,o()({key:`${e.metadata.lineitem_id}-${r}`,fireTrackingEvent:t,firedViewedEvents:s,version:i,onClick:async function(){const[{getEventSenderInstance:e},{createPodcastAdCtaCardEvent:t}]=await Promise.all([Promise.resolve().then(n.bind(n,24872)),n.e(814).then(n.bind(n,1486))]);return e().send(t({uri:u,reason:d,lineitem_id:l.map((e=>e.metadata.lineitemId)),ui_navigate:l.map((({clickthrough:e},t)=>r===t?e:"")),navigate_to_external_uri:l.map(((e,t)=>r===t))}))}},e))))),[l,t,s,i,d,u]);return{displayedEpisodeSponsorsData:l,displayedSponsors:f}}var u=n(69518),l=n.n(u);var f=n(16528);var O=n(18693);function b({firedViewedEvents:e}){var t;const n=(0,a.useRef)();return{firedViewedEvents:n.current=null!==(t=null!=e?e:n.current)&&void 0!==t?t:new Set}}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S({uri:e,getEpisodeSponsors:t,fireTrackingEvent:n,numberOfSponsorsToDisplay:r,version:o,reason:s}){const{state:i}=(0,f.TH)(),{episodeBase62Id:c}=function({uri:e,episodeBase62Id:t}){return{episodeBase62Id:(0,a.useMemo)((()=>{var n;return t||(null===(n=l().from(e))||void 0===n?void 0:n.getBase62Id())}),[e,t])}}(v(v({},i),{},{uri:e})),{fetchedEpisodeSponsorsData:p}=(0,O.m)(v(v({},i),{},{episodeBase62Id:c,getEpisodeSponsors:t,version:o})),{firedViewedEvents:u}=b(v({},i));return v(v({uri:e,episodeBase62Id:c,fetchedEpisodeSponsorsData:p},d({fetchedEpisodeSponsorsData:p,fireTrackingEvent:n,numberOfSponsorsToDisplay:r,firedViewedEvents:u,version:o,reason:s,uri:e})),{},{firedViewedEvents:u,reason:s})}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const D=(0,a.lazy)((()=>n.e(479).then(n.bind(n,27479)))),P="episode-sponsors-shelf",g="see-all-episode-sponsors";function h(e){const{numberOfSponsorsToDisplay:t}=function({numberOfSponsorsToDisplay:e=3}){return{numberOfSponsorsToDisplay:e}}(e),n=S(m(m({},e),{},{numberOfSponsorsToDisplay:t}));return n.episodeBase62Id&&n.displayedSponsors.length?c().createElement(a.Suspense,{fallback:!0},c().createElement(D,o()({},e,{numberOfSponsorsToDisplay:t,state:n}))):null}const w=h},18693:(e,t,n)=>{n.d(t,{F:()=>i,m:()=>a});var r=n(67294),o=n(64005),s=n(31604);const i=420;function a({episodeBase62Id:e,getEpisodeSponsors:t,fetchedEpisodeSponsorsData:a=[],version:c}){const[p,d]=(0,r.useState)(a),u=(0,r.useCallback)((async()=>{try{if(!e)throw new Error("episodeBase62Id is required to fetch episode sponsors");const r=null!=t?t:(await Promise.resolve().then(n.bind(n,11401))).getEpisodeSponsors;d(await r(e,{version:c}))}catch(e){d([])}}),[e,t,c]),l=(0,o.y)(u,i);return(0,r.useEffect)((function(){a.length||l()}),[l,a.length]),(0,s.H)(l),{fetchedEpisodeSponsorsData:p}}},99922:(e,t,n)=>{n.d(t,{o:()=>s});var r=n(44794),o=n(44503);function s(){return{version:(0,r.W6)(o.GE)?2:1}}},31604:(e,t,n)=>{n.d(t,{H:()=>p});var r=n(67294),o=n(44794),s=n(44503),i=n(40080),a=n(8341),c=n(99995);function p(e){const t=(0,o.W6)(s.oF),n=(0,a.Y)((e=>{var t,n;const r=null!==(t=null==e?void 0:e.item)&&void 0!==t?t:void 0;return(0,c.k6)(r)&&r.isPodcastAd&&null!==(n=r.id)&&void 0!==n?n:void 0})),p=(0,i.D)(n);(0,r.useEffect)((function(){n!==p&&Boolean(n)&&setTimeout(e,t)}),[e,n,p,t])}},77186:(e,t,n)=>{n.d(t,{P:()=>p});var r=n(59713),o=n.n(r),s=n(67294),i=n(16528);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(){const e=(0,i.k6)(),{listen:t,location:n}=e;return(0,s.useEffect)((function(){return t(((e,t)=>{"POP"===t&&(e.state=c(c(c({},void 0),n.state),e.state))}))})),e}},40080:(e,t,n)=>{n.d(t,{D:()=>o});var r=n(67294);function o(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}}}]);
//# sourceMappingURL=xpui-routes-all-episode-sponsors.js.map